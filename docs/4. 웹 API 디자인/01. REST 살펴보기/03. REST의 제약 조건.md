## REST API를 만드는 6가지 제약 조건

지난 글에서 우리는 좋은 API 디자인의 기준으로 'REST'를 알아봤습니다. 그렇다면 RESTful API는 구체적으로 어떤 원칙을 따라야 할까요? REST의 창시자인 로이 필딩(Roy Fielding)은 그의 논문에서 6가지 제약 조건을 제안했습니다.

이번 글에서는 이 6가지 원칙이 각각 무엇을 의미하는지 쉽고 명확하게 알아보겠습니다.

---

### 1. 클라이언트-서버 구조 (Client-Server)

첫 번째 원칙은 **정보를 요청하는 '클라이언트'와 정보를 제공하는 '서버'의 역할을 명확하게 분리**해야 한다는 것입니다.

- **클라이언트**: 사용자 인터페이스(UI)에 집중합니다.
- **서버**: 비즈니스 로직과 데이터 저장/관리에 집중합니다.

이렇게 둘의 관심사를 분리하면, 서로의 변경 사항에 영향을 받지 않고 독립적으로 발전할 수 있습니다. 예를 들어, 서버 교체 없이 클라이언트 앱의 디자인만 완전히 새롭게 바꿀 수 있게 됩니다.

### 2. 무상태성 (Stateless)

두 번째 원칙은 **서버가 클라이언트의 상태(Context)를 저장하지 않는 것**을 의미합니다.

> **서버는 각각의 요청을 완전히 독립적인 것으로 취급**해야 합니다. 즉, 클라이언트는 이전 요청과 무관하게, 매번 요청에 필요한 모든 정보를 담아서 보내야 합니다.

로그인을 예로 들면, 상태를 저장하는(Stateful) 서버는 사용자가 로그인했다는 사실을 기억하지만, 무상태(Stateless) 서버는 매 요청마다 사용자가 누구인지 확인할 수 있는 토큰과 같은 정보를 함께 보내주길 기대합니다.

### 3. 캐시 가능 (Cacheable)

세 번째 원칙은 **서버의 응답 데이터가 '캐시'될 수 있는지 여부를 명시**해야 한다는 것입니다.

'캐시'란 데이터의 복사본을 임시로 저장하여 다음 요청 시 더 빠르게 접근할 수 있도록 하는 기술입니다. 서버는 응답 헤더에 `Cache-Control` 같은 정보를 포함하여 "이 데이터는 1시간 동안 재사용해도 좋아!" 또는 "이 데이터는 절대 재사용하면 안 돼!" 와 같은 규칙을 클라이언트에게 알려줄 수 있습니다. 이를 통해 네트워크 효율을 높이고 사용자 경험을 개선할 수 있습니다.

### 4. 계층화된 시스템 (Layered System)

네 번째 원칙은 **클라이언트와 서버 사이에 여러 계층(Layer)을 둘 수 있는 구조**가 되어야 한다는 것입니다.

예를 들어, 클라이언트는 API 서버에 직접 요청을 보내는 것 같지만, 그 사이에는 보안을 위한 방화벽이나 성능을 위한 로드 밸런서, 캐시 서버 등 다양한 중간 서버가 존재할 수 있습니다. 클라이언트는 이러한 중간 계층의 존재를 전혀 알 필요 없이, 오직 최종 목적지인 API 서버와만 통신하는 것처럼 동작해야 합니다.

### 5. 주문형 코드 (Code-On-Demand, 선택 사항)

다섯 번째 원칙은 서버가 클라이언트에게 **실행 가능한 코드를 전송**할 수 있다는 것입니다. 가장 대표적인 예가 바로 JavaScript 코드입니다. 이 원칙은 유일한 **선택적 제약 조건**으로, 반드시 지키지 않아도 REST 원칙을 위반하는 것은 아닙니다.

### 6. 일관된 인터페이스 (Uniform Interface)

마지막 여섯 번째 원칙이자 **API 디자인의 핵심**입니다. 이 원칙은 마치 '공용 출입문'처럼, **정해진 하나의 방식으로만 서버와 통신**하도록 강제하여 시스템 전체를 단순화하고 가시성을 높입니다.

---

### HTTP와 REST: 환상의 짝꿍 🤝

"이 6가지 원칙을 언제 다 신경 쓰지?" 하고 걱정할 필요는 없습니다. 다행히도 우리가 웹에서 사용하는 **HTTP 프로토콜은 이미 REST의 많은 부분을 자연스럽게 만족**시키도록 설계되었습니다.

- `요청(클라이언트)과 응답(서버)` 구조 → **클라이언트-서버** 원칙 만족
- `Stateless, Connectionless` 특징 → **무상태성** 원칙 만족
- `Cache-Control` 헤더 → **캐시 가능** 원칙 만족
- `프록시 서버` 등의 중개 가능성 → **계층화된 시스템** 원칙 만족
- `응답 Body에 JavaScript 코드` 포함 가능 → **주문형 코드** 원칙 만족

결국 우리가 API를 디자인할 때 가장 집중하고 고민해야 할 부분은 바로 **'일관된 인터페이스(Uniform Interface)'** 원칙인 셈입니다.

---

### 개발자의 핵심 과제: 일관된 인터페이스

'API를 만든다'는 것은 결국 **'어디로, 어떻게, 무엇을 담아 요청을 보낼지'** 를 정하는 과정입니다. 이 과정을 안내하는 규칙이 바로 '일관된 인터페이스'이며, 이 원칙은 다시 4가지 하위 제약 조건으로 나뉩니다.

1.  **자원의 식별 (Identification of resources)**
2.  **표현을 통한 자원의 조작 (Manipulation of resources through representations)**
3.  **자기 서술적 메시지 (Self-descriptive messages)**
4.  **애플리케이션 상태의 엔진으로서 하이퍼미디어 (Hypermedia As The Engine Of Application State, HATEOAS)**

이 4가지 규칙이 정확히 무엇을 의미하는지는 다음 글에서 API를 구성하는 요소들과 함께 하나씩 자세히 살펴보도록 하겠습니다.

---

### ✍️ 마무리하며

이번 글에서는 REST를 구성하는 **6가지 핵심 원칙**을 살펴보았습니다. 대부분의 원칙은 **HTTP 프로토콜을 사용하는 것만으로도 자연스럽게 지켜진다**는 사실을 확인했습니다. 그 결과, 개발자는 여러 원칙 중에서도 특히 **'일관된 인터페이스'** 를 어떻게 잘 설계할지에 집중해야 한다는 결론을 얻었습니다.
