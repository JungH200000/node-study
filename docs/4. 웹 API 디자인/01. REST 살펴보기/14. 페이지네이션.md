## 한 번에 10,000개? API 데이터를 똑똑하게 나눠 담는 법, 페이지네이션 📖

만약 우리가 만든 API가 다루는 데이터가 10개 남짓이라면, 클라이언트와 서버 모두 데이터를 주고받는 데 큰 부담이 없습니다. 하지만 게시글, 댓글, 사용자 목록처럼 데이터가 수천, 수만 개로 늘어난다면 어떨까요?

이 모든 데이터를 한 번의 요청으로 전부 보내주는 것은 서버에게도, 한 번에 받아 처리해야 하는 클라이언트에게도 큰 부담이 됩니다. 네트워크 지연은 물론, 심하면 애플리케이션이 멈출 수도 있죠.

이 문제를 해결하기 위해, 우리는 마치 두꺼운 책의 **페이지를 넘기듯** 데이터를 잘게 나눠서 주고받기로 약속했습니다. 이 방법을 **페이지네이션(Pagination)** 이라고 합니다.

---

### 페이지네이션은 어떻게 동작할까?

페이지네이션의 핵심은, 데이터와 함께 **'페이지 정보(Metadata)'** 를 함께 보내주는 것입니다. 이를 통해 클라이언트는 현재 페이지의 상태를 파악하고 다음 페이지를 요청할 수 있게 됩니다.

#### **요청 (Request): "2페이지, 10개씩 보여줘\!"**

클라이언트는 보통 쿼리 파라미터(Query Parameter)를 사용해 원하는 페이지와 페이지당 데이터 개수를 서버에 요청합니다.

```http
# 2페이지의 게시글을, 한 페이지당 10개씩 보여달라는 요청
GET /posts?page=2&limit=10
```

#### **응답 (Response): "데이터랑 페이지 정보 같이 줄게\!"**

서버는 요청받은 데이터와 함께, 현재 페이지 상태와 다음/이전 페이지를 요청할 수 있는 정보 등을 함께 담아 응답합니다.

```json
{
  // 1. 페이지 정보 (Metadata)
  "pagination": {
    "currentPage": 2, // 현재 페이지 번호
    "totalPages": 100, // 전체 페이지 수
    "totalItems": 1000, // 전체 아이템 개수
    "nextPage": "/posts?page=3&limit=10", // '다음 페이지' 요청 주소
    "previousPage": "/posts?page=1&limit=10" // '이전 페이지' 요청 주소
  },
  // 2. 실제 데이터 (Data)
  "data": [
    { "id": 11, "title": "11번째 게시글" },
    { "id": 12, "title": "12번째 게시글" },
    // ... 10개의 게시글 데이터 ...
    { "id": 20, "title": "20번째 게시글" }
  ]
}
```

---

### 우리가 매일 만나는 페이지네이션 UI

이렇게 API가 페이지 정보를 제공해주면, 우리는 익숙한 UI를 만들 수 있습니다.

#### **1. 페이지 번호 버튼**

게시판 하단에서 흔히 볼 수 있는 페이지 이동 버튼입니다. 클라이언트는 응답으로 받은 페이지 정보를 바탕으로 이 버튼들을 동적으로 생성합니다.

![post-page](../image/post-page.png)

#### **2. 무한 스크롤 (Infinite Scroll)**

소셜 미디어나 뉴스 피드에서 많이 사용되는 방식입니다. 사용자가 스크롤을 화면 끝까지 내리면, 클라이언트는 응답으로 받은 `nextPage` 주소로 다음 페이지의 데이터를 자동으로 요청하여 기존 목록 아래에 이어 붙여줍니다.

![infinity-scroll](../image/infinity-scroll.png)

---

### 페이지네이션, 꼭 써야 할까?

모든 API에 페이지네이션이 필요한 것은 아닙니다. 카테고리 목록처럼 데이터의 양이 적고 거의 변하지 않는 자원이라면, 굳이 페이지네이션을 적용할 필요가 없습니다. 오히려 불필요한 API 호출만 늘릴 수 있죠.

하지만 **게시글, 댓글, 상품 목록처럼 사용자가 서비스를 이용함에 따라 계속해서 데이터가 늘어나는 자원**이라면, 서버와 클라이언트의 부담을 줄이고 쾌적한 사용자 경험을 제공하기 위해 페이지네이션 적용은 **필수적**입니다.

---

### ✍️ 마무리하며

- **페이지네이션**은 대용량의 데이터를 작은 단위의 '페이지'로 나누어 처리하는 API 디자인 기법입니다.
- 서버는 데이터와 함께 **현재 페이지, 전체 페이지 수, 다음/이전 페이지 링크**와 같은 메타데이터를 함께 제공해야 합니다.
- 이를 통해 클라이언트는 **페이지 번호 버튼**이나 **무한 스크롤** 같은 익숙한 UI를 구현할 수 있습니다.
- 데이터가 계속해서 증가할 가능성이 있는 API라면, 성능과 안정성을 위해 페이지네이션을 반드시 고려해야 합니다.
