## API μ„±λ¥ μµμ ν™”μ λΉ„λ°€: HTTP μΊμ‹± λ‘λ‘ν•κ² μ‚¬μ©ν•κΈ° π§ 

μ„λ²„λ” μλ§μ€ ν΄λΌμ΄μ–ΈνΈλ΅λ¶€ν„° λμ„μ—†μ΄ μ”μ²­(Request)μ„ λ°›μµλ‹λ‹¤. κ·Έλ°λ° λ§μ•½ μ—¬λ¬ ν΄λΌμ΄μ–ΈνΈκ°€ **λ™μΌν•κ³ , λ³€κ²½λμ§€ μ•μ€ λ°μ΄ν„°**λ¥Ό λ°λ³µν•΄μ„ μ”μ²­ν•λ‹¤λ©΄ μ–΄λ–¨κΉμ”? μ„λ²„λ” λ‘κ°™μ€ λ°μ΄ν„°λ¥Ό κ³„μ†ν•΄μ„ λ³΄λ‚΄μ£Όμ–΄μ•Ό ν•κ³ , μ΄λ” μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ λ¨λ‘μ—κ² λ¶ν•„μ”ν• μ‹κ°„κ³Ό μμ› λ‚­λΉ„μ…λ‹λ‹¤.

λ§μΉ λ„μ„κ΄€μ—μ„ μ–΄μ  λΉλ Έλ μ±…μ„ μ¤λ λ λΉλ¦¬λ¬ κ°€λ” κ²ƒκ³Ό κ°™μ£ . μ–΄μ°¨ν”Ό λ‚΄μ©μ΄ λ‘κ°™λ‹¤λ©΄, μ§‘μ— μλ” μ±…μ„ λ‹¤μ‹ λ³΄λ©΄ λ  ν…λ° λ§μ…λ‹λ‹¤.

μ΄λ¬ν• λ‚­λΉ„λ¥Ό μ¤„μ΄κΈ° μ„ν•΄ **μΊμ‹±(Caching)** μ΄λΌλ” κΈ°μ μ„ μ‚¬μ©ν•©λ‹λ‹¤. **μΊμ‹(Cache)** λ€ ν• λ² λ°›μ•„μ¨ λ°μ΄ν„°λ¥Ό μ¬μ‚¬μ©ν•κΈ° μ„ν•΄ μ„μ‹λ΅ μ €μ¥ν•΄λ‘λ” μ¥μ†λ¥Ό μλ―Έν•λ©°, RESTμ μ¤‘μ”ν• μ μ•½ μ΅°κ±΄ μ¤‘ ν•λ‚μ…λ‹λ‹¤.

HTTPμ—μ„λ” ν—¤λ”λ¥Ό μ΄μ©ν•΄ μ΄ μΊμ‹±μ„ μ•„μ£Ό μ¤λ§νΈν•κ² μ μ–΄ν•  μ μμµλ‹λ‹¤. μΊμ‹± μ „λµμ€ ν¬κ² λ‘ κ°€μ§€λ΅ λ‚λ‰©λ‹λ‹¤.

- **μ ν¨κΈ°κ°„ μ „λµ**: "μ΄ λ°μ΄ν„°λ” 1λ¶„ λ™μ• μ ν¨ν•λ‹, 1λ¶„ μ•μ—λ” λ‚ν•ν… λ‹¤μ‹ λ¬Όμ–΄λ³΄μ§€ λ§\!"
- **μ¬κ²€μ¦ μ „λµ**: "νΉμ‹ λ‚΄κ°€ κ°€μ§„ λ°μ΄ν„°κ°€ μ—¬μ „ν μµμ‹  λ²„μ „μΈμ§€ ν™•μΈλ§ ν•΄μ¤\!"

---

### μ „λµ 1: μ ν¨κΈ°κ°„ μ„¤μ •ν•κΈ° (`Cache-Control`)

κ°€μ¥ κΈ°λ³Έμ μΈ μΊμ‹± λ°©λ²•μ€ λ°μ΄ν„°μ— **μ ν¨κΈ°κ°„**μ„ μ„¤μ •ν•λ” κ²ƒμ…λ‹λ‹¤. `Cache-Control` ν—¤λ”μ `max-age` κ°’μ„ μ‚¬μ©ν•λ©΄ "μ΄ λ°μ΄ν„°κ°€ λ‡ μ΄ λ™μ• μ ν¨ν•μ§€"λ¥Ό ν΄λΌμ΄μ–ΈνΈμ—κ² μ•λ ¤μ¤„ μ μμµλ‹λ‹¤.

#### **μµμ΄ μ”μ²­**

ν΄λΌμ΄μ–ΈνΈκ°€ μ²μμΌλ΅ ν”„λ΅ν•„ μ΄λ―Έμ§€λ¥Ό μ”μ²­ν•©λ‹λ‹¤.

```http
GET /members/1/profile
```

#### **μµμ΄ μ‘λ‹µ**

μ„λ²„λ” μ΄λ―Έμ§€ λ°μ΄ν„°μ™€ ν•¨κ», μ΄ λ°μ΄ν„°κ°€ **60μ΄κ°„ μ ν¨**ν•λ‹¤λ” `Cache-Control` ν—¤λ”λ¥Ό λ³΄λƒ…λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈλ” μ΄ μ‘λ‹µμ„ μΊμ‹μ— μ €μ¥ν•©λ‹λ‹¤.

```http
HTTP/1.1 200 OK
Content-Type: image/png
Cache-Control: max-age=60

(10MB μ΄λ―Έμ§€ λ°μ΄ν„°)
```

#### **60μ΄ μ΄λ‚΄μ ν›„μ† μ”μ²­**

ν΄λΌμ΄μ–ΈνΈλ” 60μ΄κ°€ μ§€λ‚κΈ° μ „κΉμ§€λ” μ„λ²„μ— μ”μ²­μ„ λ³΄λ‚΄μ§€ μ•κ³ , μμ‹ μ΄ μ €μ¥ν•΄ λ‘” **μΊμ‹μ—μ„ μ§μ ‘ μ΄λ―Έμ§€λ¥Ό κ°€μ Έμ™€ μ‚¬μ©**ν•©λ‹λ‹¤. λ„¤νΈμ›ν¬ ν†µμ‹ μ΄ μ „ν€ λ°μƒν•μ§€ μ•μ•„ λ§¤μ° λΉ λ¦…λ‹λ‹¤.

---

### μ „λµ 2: λ°μ΄ν„°κ°€ λ°”λ€μ—λ”μ§€ λ¬Όμ–΄λ³΄κΈ° (μ¬κ²€μ¦)

`max-age`λ΅ μ§€μ •ν• μ ν¨κΈ°κ°„μ΄ μ§€λ‚λ©΄ μΊμ‹λ” λ§λ£λ©λ‹λ‹¤. μ΄λ• ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ— **"νΉμ‹ λ°μ΄ν„°κ°€ κ·Έ μ‚¬μ΄μ— λ³€κ²½λμ—λ‹?"** λΌκ³  λ¬Όμ–΄λ³΄κ³ , λ³€κ²½λμ§€ μ•μ•λ‹¤λ©΄ κΈ°μ΅΄ μΊμ‹ λ°μ΄ν„°λ¥Ό μ¬μ‚¬μ©ν•  μ μμµλ‹λ‹¤. μ΄ 'μ¬κ²€μ¦' κ³Όμ •μ—λ” λ‘ κ°€μ§€ λ°©λ²•μ΄ μμµλ‹λ‹¤.

#### λ°©λ²• A: λ§μ§€λ§‰ μμ •μΌλ΅ κ²€μ¦ν•κΈ° (`Last-Modified` / `If-Modified-Since`)

λ°μ΄ν„°κ°€ λ§μ§€λ§‰μΌλ΅ μμ •λ λ‚ μ§λ¥Ό κΈ°μ¤€μΌλ΅ λ³€κ²½ μ—¬λ¶€λ¥Ό ν™•μΈν•λ” λ°©λ²•μ…λ‹λ‹¤.

#### **μµμ΄ μ‘λ‹µ (μμ • λ‚ μ§ ν¬ν•¨)**

μ„λ²„κ°€ λ°μ΄ν„°μ™€ ν•¨κ» λ°μ΄ν„°κ°€ λ§μ§€λ§‰μΌλ΅ μμ •λ λ‚ μ§ μ •λ³΄(`Last-Modified`)λ¥Ό ν•¨κ» λ³΄λ‚΄μ¤λ‹λ‹¤.

```http
HTTP/1.1 200 OK
Content-Type: image/png
Cache-Control: max-age=60
Last-Modified: Mon, 08 Sep 2025 10:00:00 GMT

(10MB μ΄λ―Έμ§€ λ°μ΄ν„°)
```

#### **μΊμ‹ λ§λ£ ν›„ μ¬κ²€μ¦ μ”μ²­**

60μ΄κ°€ μ§€λ‚ μΊμ‹κ°€ λ§λ£λλ©΄, ν΄λΌμ΄μ–ΈνΈλ” μμ‹ μ΄ κΈ°μ–µν•κ³  μλ” μμ • λ‚ μ§λ¥Ό `If-Modified-Since` ν—¤λ”μ— λ‹΄μ•„ μ„λ²„μ— λ¬Όμ–΄λ΄…λ‹λ‹¤.

```http
GET /members/1/profile
If-Modified-Since: Mon, 08 Sep 2025 10:00:00 GMT
```

#### **μ¬κ²€μ¦ μ‘λ‹µ (λ³€κ²½ μ—†μ)**

μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚΄μ¤€ λ‚ μ§μ™€ μ‹¤μ  νμΌμ μμ • λ‚ μ§λ¥Ό λΉ„κµν•©λ‹λ‹¤. λ§μ•½ λ³€κ²½λ λ‚΄μ©μ΄ μ—†λ‹¤λ©΄, **`304 Not Modified`** λΌλ” μƒνƒ μ½”λ“μ™€ ν•¨κ» **λ³Έλ¬Έ(Body) μ—†μ΄ ν—¤λ”λ§** λ³΄λƒ…λ‹λ‹¤.

```http
HTTP/1.1 304 Not Modified
Cache-Control: max-age=60
Last-Modified: Mon, 08 Sep 2025 10:00:00 GMT

(λ³Έλ¬Έ μ—†μ)
```

ν΄λΌμ΄μ–ΈνΈλ” μ΄ μ‘λ‹µμ„ λ°›κ³ , "μ•„, λ‚΄κ°€ κ°€μ§„ λ°μ΄ν„°κ°€ μ—¬μ „ν μµμ‹ μ΄κµ¬λ‚\!"λΌκ³  νλ‹¨ν•μ—¬ μΊμ‹λ 10MB μ΄λ―Έμ§€ λ°μ΄ν„°λ¥Ό μ¬μ‚¬μ©ν•κ³ , μΊμ‹μ μ ν¨κΈ°κ°„μ„ λ‹¤μ‹ 60μ΄λ΅ κ°±μ‹ ν•©λ‹λ‹¤.

---

#### λ°©λ²• B: λ°μ΄ν„° κ³ μ  μ‹λ³„μλ΅ κ²€μ¦ν•κΈ° (`ETag` / `If-None-Match`)

`Last-Modified`λ” 1μ΄ λ―Έλ§μ μ •λ°€ν• μ μ–΄κ°€ μ–΄λ µκ³ , νμΌ λ‚΄μ©μ€ κ·Έλ€λ΅μΈλ° μμ • μ‹κ°„λ§ λ°”λ€λ” κ²½μ°μ—λ„ λ°μ΄ν„°κ°€ λ³€κ²½λμ—λ‹¤κ³  μ°©κ°ν•λ” ν•κ³„κ°€ μμµλ‹λ‹¤.

μ΄λ° λ‹¨μ μ„ λ³΄μ™„ν•κΈ° μ„ν•΄ **`ETag`** λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤. `ETag`λ” ν•΄λ‹Ή λ°μ΄ν„°μ λ²„μ „μ„ λ‚νƒ€λ‚΄λ” κ³ μ ν• μ‹λ³„μ(λ§μΉ νμΌμ μ§€λ¬Έμ΄λ‚ ν•΄μ‹κ°’)μ…λ‹λ‹¤. λ°μ΄ν„° λ‚΄μ©μ΄ μ΅°κΈμ΄λΌλ„ λ°”λ€λ©΄ `ETag` κ°’λ„ ν•¨κ» λ³€κ²½λ©λ‹λ‹¤.

#### **μµμ΄ μ‘λ‹µ (ETag ν¬ν•¨)**

```http
HTTP/1.1 200 OK
Content-Type: image/png
Cache-Control: max-age=60
ETag: "xyz-123-abc-789"

(10MB μ΄λ―Έμ§€ λ°μ΄ν„°)
```

#### **μΊμ‹ λ§λ£ ν›„ μ¬κ²€μ¦ μ”μ²­**

μΊμ‹ λ§λ£ ν›„, ν΄λΌμ΄μ–ΈνΈλ” μμ‹ μ΄ κΈ°μ–µν•λ” `ETag` κ°’μ„ `If-None-Match` ν—¤λ”μ— λ‹΄μ•„ μ„λ²„μ— λ¬Όμ–΄λ΄…λ‹λ‹¤.

```http
GET /members/1/profile
If-None-Match: "xyz-123-abc-789"
```

#### **μ¬κ²€μ¦ μ‘λ‹µ (λ³€κ²½ μ—†μ)**

μ„λ²„λ” ν„μ¬ λ°μ΄ν„°μ `ETag`μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ `ETag`λ¥Ό λΉ„κµν•©λ‹λ‹¤. κ°’μ΄ κ°™λ‹¤λ©΄, `Last-Modified` λ•μ™€ λ§μ°¬κ°€μ§€λ΅ `304 Not Modified` μ‘λ‹µμ„ λ³΄λƒ…λ‹λ‹¤.

```http
HTTP/1.1 304 Not Modified
Cache-Control: max-age=60
ETag: "xyz-123-abc-789"

(λ³Έλ¬Έ μ—†μ)
```

`ETag`λ” λ‚ μ§ κΈ°λ° λ°©μ‹λ³΄λ‹¤ λ” μ •κµν•κ² λ°μ΄ν„°μ λ³€κ²½ μ—¬λ¶€λ¥Ό κ°μ§€ν•  μ μμ–΄ λ” κ¶μ¥λλ” λ°©μ‹μ…λ‹λ‹¤.

---

### βοΈ λ§λ¬΄λ¦¬ν•λ©°

HTTP μΊμ‹±μ€ APIμ μ„±λ¥μ„ κ·Ήλ€ν™”ν•κ³  λ¶ν•„μ”ν• λ„¤νΈμ›ν¬ νΈλν”½μ„ μ¤„μ΄λ” ν•µμ‹¬μ μΈ κΈ°λ¥μ…λ‹λ‹¤.

- **`Cache-Control`** ν—¤λ”λ΅ μΊμ‹μ **μ ν¨κΈ°κ°„**μ„ μ •ν•΄ λ¶ν•„μ”ν• μ”μ²­μ„ λ§‰κ³ ,
- μ ν¨κΈ°κ°„μ΄ λ§λ£λ ν›„μ—λ” **`Last-Modified`** λ‚ **`ETag`** κ°™μ€ **μ¬κ²€μ¦** ν—¤λ”λ¥Ό ν†µν•΄ λ°μ΄ν„°κ°€ λ³€κ²½λμ§€ μ•μ•λ‹¤λ©΄ μ „μ²΄ λ°μ΄ν„°λ¥Ό λ‹¤μ‹ λ‹¤μ΄λ΅λ“ν•λ” λ‚­λΉ„λ¥Ό λ§‰μ„ μ μμµλ‹λ‹¤.

μ΄λ¬ν• μΊμ‹± ν—¤λ”λ“¤μ€ λ…λ¦½μ μΌλ΅ μ‚¬μ©λκΈ°λ³΄λ‹¤, `Cache-Control`κ³Ό `ETag`λ¥Ό ν•¨κ» μ‚¬μ©ν•λ” κ²ƒμ²λΌ **μƒν™©μ— λ§μ¶° μ„λ΅λ¥Ό λ³΄μ™„ν•λ©° μ‚¬μ©**λ©λ‹λ‹¤. μƒν™©μ— λ§λ” μ μ ν• μΊμ‹± μ „λµμ„ μ‚¬μ©ν•λ” κ²ƒμ΄ μΆ‹μ€ APIλ¥Ό λ§λ“λ” μ¤‘μ”ν• μ—΄μ‡  μ¤‘ ν•λ‚μ…λ‹λ‹¤.
