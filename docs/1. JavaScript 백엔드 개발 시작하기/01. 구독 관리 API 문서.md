## Subscription API 문서

이 문서는 **Subscription(구독)** 정보를 관리하기 위한 API 명세서입니다.

### 📜 전체 엔드포인트

| Method   | URL                  | 설명                           |
| :------- | :------------------- | :----------------------------- |
| `GET`    | `/subscriptions`     | 모든 구독 목록을 조회합니다.   |
| `GET`    | `/subscriptions/:id` | 특정 구독 정보를 조회합니다.   |
| `POST`   | `/subscriptions`     | 새로운 구독 정보를 추가합니다. |
| `PATCH`  | `/subscriptions/:id` | 특정 구독 정보를 수정합니다.   |
| `DELETE` | `/subscriptions/:id` | 특정 구독 정보를 삭제합니다.   |

_참고: API의 기본 주소(예: `http://localhost:3000`)는 배포 환경에 따라 달라질 수 있으므로 생략했습니다._

### 📦 Subscription 객체 모델

API에서 사용되는 `Subscription` 객체의 구조는 다음과 같습니다.

#### 속성

- `_id`: **string**
  - 객체의 고유 식별자입니다.
  - 최종적으로는 MongoDB의 `ObjectId` 형식을 따르지만, 개발 초기 단계에서는 숫자(1, 2, 3...)를 사용할 수 있습니다.
  - **자동 생성 필드**입니다.
- `name`: **string**
  - 구독 서비스의 이름입니다. (필수, 최대 20자)
- `price`: **number**
  - 구독 요금입니다. (필수)
- `cycle`: **string**
  - 결제 주기입니다. 월간은 `m`, 연간은 `y`로 표기합니다. (필수)
- `firstPaymentDate`: **string**
  - 첫 결제일입니다. (ISO 8601 형식: `YYYY-MM-DDTHH:MM:SS.SSSZ`)
- `memo`: **string**
  - 구독에 대한 메모입니다. (선택)
- `createdAt`: **string**
  - 객체가 생성된 시점의 타임스탬프입니다. (ISO 8601 형식)
  - **자동 생성 필드**입니다.
- `updatedAt`: **string**
  - 객체가 마지막으로 수정된 시점의 타임스탬프입니다. (ISO 8601 형식)
  - **자동 생성 필드**입니다.

#### 객체 예시

```json
{
  "_id": "641bf3c9c0a964b65289902a",
  "name": "넷플릭스 프리미엄",
  "price": 17000,
  "cycle": "m",
  "firstPaymentDate": "2021-07-01T00:00:00.000Z",
  "memo": "10일날 취소하기",
  "createdAt": "2023-03-23T06:34:11.617Z",
  "updatedAt": "2023-03-23T06:34:11.617Z"
}
```

---

### 🔍 Subscription 목록 조회

`Subscription` 객체의 전체 목록을 조회합니다. 기본적으로 최신순으로 정렬됩니다.

- **엔드포인트**: `GET /subscriptions`

#### 쿼리 파라미터 (Query Parameters)

- `sort`: **string**
  - 정렬 순서를 지정합니다. `price`를 값으로 주면 **높은 요금 순**으로, 그 외의 경우(또는 생략 시) **최신순**으로 정렬됩니다.

#### 응답 (Response)

- **성공**: `200 OK` 상태 코드와 함께 `Subscription` 객체 배열을 반환합니다.
- **실패**: 에러 상태 코드와 메시지를 반환합니다.

#### 요청 및 응답 예시

- **요청**
  ```
  GET http://localhost:3000/subscriptions
  ```
- **응답**

  ```json
  HTTP/1.1 200 OK
  Content-Type: application/json

  [
    {
      "_id": "641bf3c9c0a964b65289902a",
      "name": "넷플릭스 프리미엄",
      "price": 17000,
      "cycle": "m",
      "firstPaymentDate": "2021-07-01T00:00:00.000Z",
      "memo": "10일날 취소하기",
      "createdAt": "2023-03-23T06:34:11.617Z",
      "updatedAt": "2023-03-23T06:34:11.617Z"
    },
    {
      "_id": "641bf3c9c0a964b65289903c",
      "name": "스포티파이 베이직",
      "price": 7900,
      "cycle": "m",
      "firstPaymentDate": "2019-06-23T00:00:00.000Z",
      "memo": null,
      "createdAt": "2023-03-23T06:34:10.617Z",
      "updatedAt": "2023-03-23T06:34:10.617Z"
    }
  ]
  ```

---

### 🔎 특정 Subscription 조회

URL 파라미터로 전달된 `:id`에 해당하는 `Subscription` 객체 하나를 조회합니다.

- **엔드포인트**: `GET /subscriptions/:id`

#### 응답 (Response)

- **성공**: `200 OK` 상태 코드와 함께 해당 `Subscription` 객체를 반환합니다.
- **실패**: 에러 상태 코드와 메시지를 반환합니다.

#### 요청 및 응답 예시

- **요청**
  ```
  GET http://localhost:3000/subscriptions/641bf3c9c0a964b65289902a
  ```
- **응답**

  ```json
  HTTP/1.1 200 OK
  Content-Type: application/json

  {
    "_id": "641bf3c9c0a964b65289902a",
    "name": "넷플릭스 프리미엄",
    "price": 17000,
    "cycle": "m",
    "firstPaymentDate": "2021-07-01T00:00:00.000Z",
    "memo": "10일날 취소하기",
    "createdAt": "2023-03-23T06:34:11.617Z",
    "updatedAt": "2023-03-23T06:34:11.617Z"
  }
  ```

---

### ✨ Subscription 생성

요청 바디(Body)에 담긴 정보를 사용하여 새로운 `Subscription` 객체를 생성합니다.

- **엔드포인트**: `POST /subscriptions`

#### 바디 파라미터 (Body Parameters)

- `name`: **string** (필수, 20자 이내)
- `price`: **number** (필수, 0 이상)
- `cycle`: **string** (필수, `m` 또는 `y`)
- `firstPaymentDate`: **string** (필수, 예: `2023-04-30`)
- `memo`: **string** (선택)

#### 응답 (Response)

- **성공**: `201 Created` 상태 코드와 함께 생성된 `Subscription` 객체를 반환합니다.
- **실패**: 에러 상태 코드와 메시지를 반환합니다.

#### 요청 및 응답 예시

- **요청**

  ```
  POST http://localhost:3000/subscriptions
  Content-Type: application/json

  {
    "name": "디즈니 플러스",
    "price": 99000,
    "cycle": "y",
    "firstPaymentDate": "2023-04-30"
  }
  ```

- **응답**

  ```json
  HTTP/1.1 201 Created
  Content-Type: application/json

  {
    "_id": "641bf3c9c0a964b65289902d",
    "name": "디즈니 플러스",
    "price": 99000,
    "cycle": "y",
    "firstPaymentDate": "2023-04-30T00:00:00.000Z",
    "memo": null,
    "createdAt": "2023-04-17T05:41:35.319Z",
    "updatedAt": "2023-04-17T05:41:35.319Z"
  }
  ```

---

### ✏️ Subscription 수정

URL의 `:id`에 해당하는 `Subscription` 객체의 정보를 요청 바디의 내용으로 수정합니다.

- **엔드포인트**: `PATCH /subscriptions/:id`

#### 바디 파라미터 (Body Parameters)

`PATCH` 메서드는 객체의 일부만 수정하므로, 아래 모든 필드는 **선택 사항**입니다.

- `name`: **string** (20자 이내)
- `price`: **number** (0 이상)
- `cycle`: **string** (`m` 또는 `y`)
- `firstPaymentDate`: **string**
- `memo`: **string**

#### 응답 (Response)

- **성공**: `200 OK` 상태 코드와 함께 수정된 `Subscription` 객체를 반환합니다.
- **실패**: 에러 상태 코드와 메시지를 반환합니다.

#### 요청 및 응답 예시

- **요청**

  ```
  PATCH http://localhost:3000/subscriptions/641bf3c9c0a964b65289902a
  Content-Type: application/json

  {
    "name": "넷플릭스 베이직",
    "price": 9500
  }
  ```

- **응답**

  ```json
  HTTP/1.1 200 OK
  Content-Type: application/json

  {
    "_id": "641bf3c9c0a964b65289902a",
    "name": "넷플릭스 베이직",
    "price": 9500,
    "cycle": "m",
    "firstPaymentDate": "2021-07-01T00:00:00.000Z",
    "memo": "10일날 취소하기",
    "createdAt": "2023-03-23T06:34:11.617Z",
    "updatedAt": "2023-03-24T06:34:11.617Z"
  }
  ```

---

### 🗑️ Subscription 삭제

URL의 `:id`에 해당하는 `Subscription` 객체를 삭제합니다.

- **엔드포인트**: `DELETE /subscriptions/:id`

#### 응답 (Response)

- **성공**: `204 No Content` 상태 코드를 반환하며, 응답 바디는 비어있습니다.
- **실패**: 에러 상태 코드와 메시지를 반환합니다.

#### 요청 및 응답 예시

- **요청**
  ```
  DELETE http://localhost:3000/subscriptions/641bf3c9c0a964b65289902a
  ```
- **응답**
  ```
  HTTP/1.1 204 No Content
  ```
