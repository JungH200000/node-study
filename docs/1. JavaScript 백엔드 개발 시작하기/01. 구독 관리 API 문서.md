## Subscription API λ¬Έμ„

μ΄ λ¬Έμ„λ” **Subscription(κµ¬λ…)** μ •λ³΄λ¥Ό κ΄€λ¦¬ν•κΈ° μ„ν• API λ…μ„Έμ„μ…λ‹λ‹¤.

### π“ μ „μ²΄ μ—”λ“ν¬μΈνΈ

| Method   | URL                  | μ„¤λ…                           |
| :------- | :------------------- | :----------------------------- |
| `GET`    | `/subscriptions`     | λ¨λ“  κµ¬λ… λ©λ΅μ„ μ΅°νν•©λ‹λ‹¤.   |
| `GET`    | `/subscriptions/:id` | νΉμ • κµ¬λ… μ •λ³΄λ¥Ό μ΅°νν•©λ‹λ‹¤.   |
| `POST`   | `/subscriptions`     | μƒλ΅μ΄ κµ¬λ… μ •λ³΄λ¥Ό μ¶”κ°€ν•©λ‹λ‹¤. |
| `PATCH`  | `/subscriptions/:id` | νΉμ • κµ¬λ… μ •λ³΄λ¥Ό μμ •ν•©λ‹λ‹¤.   |
| `DELETE` | `/subscriptions/:id` | νΉμ • κµ¬λ… μ •λ³΄λ¥Ό μ‚­μ ν•©λ‹λ‹¤.   |

_μ°Έκ³ : APIμ κΈ°λ³Έ μ£Όμ†(μ: `http://localhost:3000`)λ” λ°°ν¬ ν™κ²½μ— λ”°λΌ λ‹¬λΌμ§ μ μμΌλ―€λ΅ μƒλµν–μµλ‹λ‹¤._

### π“¦ Subscription κ°μ²΄ λ¨λΈ

APIμ—μ„ μ‚¬μ©λλ” `Subscription` κ°μ²΄μ κµ¬μ΅°λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

#### μ†μ„±

- `_id`: **string**
  - κ°μ²΄μ κ³ μ  μ‹λ³„μμ…λ‹λ‹¤.
  - μµμΆ…μ μΌλ΅λ” MongoDBμ `ObjectId` ν•μ‹μ„ λ”°λ¥΄μ§€λ§, κ°λ° μ΄κΈ° λ‹¨κ³„μ—μ„λ” μ«μ(1, 2, 3...)λ¥Ό μ‚¬μ©ν•  μ μμµλ‹λ‹¤.
  - **μλ™ μƒμ„± ν•„λ“**μ…λ‹λ‹¤.
- `name`: **string**
  - κµ¬λ… μ„λΉ„μ¤μ μ΄λ¦„μ…λ‹λ‹¤. (ν•„μ, μµλ€ 20μ)
- `price`: **number**
  - κµ¬λ… μ”κΈμ…λ‹λ‹¤. (ν•„μ)
- `cycle`: **string**
  - κ²°μ  μ£ΌκΈ°μ…λ‹λ‹¤. μ›”κ°„μ€ `m`, μ—°κ°„μ€ `y`λ΅ ν‘κΈ°ν•©λ‹λ‹¤. (ν•„μ)
- `firstPaymentDate`: **string**
  - μ²« κ²°μ μΌμ…λ‹λ‹¤. (ISO 8601 ν•μ‹: `YYYY-MM-DDTHH:MM:SS.SSSZ`)
- `memo`: **string**
  - κµ¬λ…μ— λ€ν• λ©”λ¨μ…λ‹λ‹¤. (μ„ νƒ)
- `createdAt`: **string**
  - κ°μ²΄κ°€ μƒμ„±λ μ‹μ μ νƒ€μ„μ¤νƒ¬ν”„μ…λ‹λ‹¤. (ISO 8601 ν•μ‹)
  - **μλ™ μƒμ„± ν•„λ“**μ…λ‹λ‹¤.
- `updatedAt`: **string**
  - κ°μ²΄κ°€ λ§μ§€λ§‰μΌλ΅ μμ •λ μ‹μ μ νƒ€μ„μ¤νƒ¬ν”„μ…λ‹λ‹¤. (ISO 8601 ν•μ‹)
  - **μλ™ μƒμ„± ν•„λ“**μ…λ‹λ‹¤.

#### κ°μ²΄ μμ‹

```json
{
  "_id": "641bf3c9c0a964b65289902a",
  "name": "λ„·ν”λ¦­μ¤ ν”„λ¦¬λ―Έμ—„",
  "price": 17000,
  "cycle": "m",
  "firstPaymentDate": "2021-07-01T00:00:00.000Z",
  "memo": "10μΌλ‚  μ·¨μ†ν•κΈ°",
  "createdAt": "2023-03-23T06:34:11.617Z",
  "updatedAt": "2023-03-23T06:34:11.617Z"
}
```

---

### π” Subscription λ©λ΅ μ΅°ν

`Subscription` κ°μ²΄μ μ „μ²΄ λ©λ΅μ„ μ΅°νν•©λ‹λ‹¤. κΈ°λ³Έμ μΌλ΅ μµμ‹ μμΌλ΅ μ •λ ¬λ©λ‹λ‹¤.

- **μ—”λ“ν¬μΈνΈ**: `GET /subscriptions`

#### μΏΌλ¦¬ νλΌλ―Έν„° (Query Parameters)

- `sort`: **string**
  - μ •λ ¬ μμ„λ¥Ό μ§€μ •ν•©λ‹λ‹¤. `price`λ¥Ό κ°’μΌλ΅ μ£Όλ©΄ **λ†’μ€ μ”κΈ μ**μΌλ΅, κ·Έ μ™Έμ κ²½μ°(λλ” μƒλµ μ‹) **μµμ‹ μ**μΌλ΅ μ •λ ¬λ©λ‹λ‹¤.

#### μ‘λ‹µ (Response)

- **μ„±κ³µ**: `200 OK` μƒνƒ μ½”λ“μ™€ ν•¨κ» `Subscription` κ°μ²΄ λ°°μ—΄μ„ λ°ν™ν•©λ‹λ‹¤.
- **μ‹¤ν¨**: μ—λ¬ μƒνƒ μ½”λ“μ™€ λ©”μ‹μ§€λ¥Ό λ°ν™ν•©λ‹λ‹¤.

#### μ”μ²­ λ° μ‘λ‹µ μμ‹

- **μ”μ²­**
  ```
  GET http://localhost:3000/subscriptions
  ```
- **μ‘λ‹µ**

  ```json
  HTTP/1.1 200 OK
  Content-Type: application/json

  [
    {
      "_id": "641bf3c9c0a964b65289902a",
      "name": "λ„·ν”λ¦­μ¤ ν”„λ¦¬λ―Έμ—„",
      "price": 17000,
      "cycle": "m",
      "firstPaymentDate": "2021-07-01T00:00:00.000Z",
      "memo": "10μΌλ‚  μ·¨μ†ν•κΈ°",
      "createdAt": "2023-03-23T06:34:11.617Z",
      "updatedAt": "2023-03-23T06:34:11.617Z"
    },
    {
      "_id": "641bf3c9c0a964b65289903c",
      "name": "μ¤ν¬ν‹°νμ΄ λ² μ΄μ§",
      "price": 7900,
      "cycle": "m",
      "firstPaymentDate": "2019-06-23T00:00:00.000Z",
      "memo": null,
      "createdAt": "2023-03-23T06:34:10.617Z",
      "updatedAt": "2023-03-23T06:34:10.617Z"
    }
  ]
  ```

---

### π” νΉμ • Subscription μ΅°ν

URL νλΌλ―Έν„°λ΅ μ „λ‹¬λ `:id`μ— ν•΄λ‹Ήν•λ” `Subscription` κ°μ²΄ ν•λ‚λ¥Ό μ΅°νν•©λ‹λ‹¤.

- **μ—”λ“ν¬μΈνΈ**: `GET /subscriptions/:id`

#### μ‘λ‹µ (Response)

- **μ„±κ³µ**: `200 OK` μƒνƒ μ½”λ“μ™€ ν•¨κ» ν•΄λ‹Ή `Subscription` κ°μ²΄λ¥Ό λ°ν™ν•©λ‹λ‹¤.
- **μ‹¤ν¨**: μ—λ¬ μƒνƒ μ½”λ“μ™€ λ©”μ‹μ§€λ¥Ό λ°ν™ν•©λ‹λ‹¤.

#### μ”μ²­ λ° μ‘λ‹µ μμ‹

- **μ”μ²­**
  ```
  GET http://localhost:3000/subscriptions/641bf3c9c0a964b65289902a
  ```
- **μ‘λ‹µ**

  ```json
  HTTP/1.1 200 OK
  Content-Type: application/json

  {
    "_id": "641bf3c9c0a964b65289902a",
    "name": "λ„·ν”λ¦­μ¤ ν”„λ¦¬λ―Έμ—„",
    "price": 17000,
    "cycle": "m",
    "firstPaymentDate": "2021-07-01T00:00:00.000Z",
    "memo": "10μΌλ‚  μ·¨μ†ν•κΈ°",
    "createdAt": "2023-03-23T06:34:11.617Z",
    "updatedAt": "2023-03-23T06:34:11.617Z"
  }
  ```

---

### β¨ Subscription μƒμ„±

μ”μ²­ λ°”λ””(Body)μ— λ‹΄κΈ΄ μ •λ³΄λ¥Ό μ‚¬μ©ν•μ—¬ μƒλ΅μ΄ `Subscription` κ°μ²΄λ¥Ό μƒμ„±ν•©λ‹λ‹¤.

- **μ—”λ“ν¬μΈνΈ**: `POST /subscriptions`

#### λ°”λ”” νλΌλ―Έν„° (Body Parameters)

- `name`: **string** (ν•„μ, 20μ μ΄λ‚΄)
- `price`: **number** (ν•„μ, 0 μ΄μƒ)
- `cycle`: **string** (ν•„μ, `m` λλ” `y`)
- `firstPaymentDate`: **string** (ν•„μ, μ: `2023-04-30`)
- `memo`: **string** (μ„ νƒ)

#### μ‘λ‹µ (Response)

- **μ„±κ³µ**: `201 Created` μƒνƒ μ½”λ“μ™€ ν•¨κ» μƒμ„±λ `Subscription` κ°μ²΄λ¥Ό λ°ν™ν•©λ‹λ‹¤.
- **μ‹¤ν¨**: μ—λ¬ μƒνƒ μ½”λ“μ™€ λ©”μ‹μ§€λ¥Ό λ°ν™ν•©λ‹λ‹¤.

#### μ”μ²­ λ° μ‘λ‹µ μμ‹

- **μ”μ²­**

  ```
  POST http://localhost:3000/subscriptions
  Content-Type: application/json

  {
    "name": "λ””μ¦λ‹ ν”λ¬μ¤",
    "price": 99000,
    "cycle": "y",
    "firstPaymentDate": "2023-04-30"
  }
  ```

- **μ‘λ‹µ**

  ```json
  HTTP/1.1 201 Created
  Content-Type: application/json

  {
    "_id": "641bf3c9c0a964b65289902d",
    "name": "λ””μ¦λ‹ ν”λ¬μ¤",
    "price": 99000,
    "cycle": "y",
    "firstPaymentDate": "2023-04-30T00:00:00.000Z",
    "memo": null,
    "createdAt": "2023-04-17T05:41:35.319Z",
    "updatedAt": "2023-04-17T05:41:35.319Z"
  }
  ```

---

### βοΈ Subscription μμ •

URLμ `:id`μ— ν•΄λ‹Ήν•λ” `Subscription` κ°μ²΄μ μ •λ³΄λ¥Ό μ”μ²­ λ°”λ””μ λ‚΄μ©μΌλ΅ μμ •ν•©λ‹λ‹¤.

- **μ—”λ“ν¬μΈνΈ**: `PATCH /subscriptions/:id`

#### λ°”λ”” νλΌλ―Έν„° (Body Parameters)

`PATCH` λ©”μ„λ“λ” κ°μ²΄μ μΌλ¶€λ§ μμ •ν•λ―€λ΅, μ•„λ λ¨λ“  ν•„λ“λ” **μ„ νƒ μ‚¬ν•­**μ…λ‹λ‹¤.

- `name`: **string** (20μ μ΄λ‚΄)
- `price`: **number** (0 μ΄μƒ)
- `cycle`: **string** (`m` λλ” `y`)
- `firstPaymentDate`: **string**
- `memo`: **string**

#### μ‘λ‹µ (Response)

- **μ„±κ³µ**: `200 OK` μƒνƒ μ½”λ“μ™€ ν•¨κ» μμ •λ `Subscription` κ°μ²΄λ¥Ό λ°ν™ν•©λ‹λ‹¤.
- **μ‹¤ν¨**: μ—λ¬ μƒνƒ μ½”λ“μ™€ λ©”μ‹μ§€λ¥Ό λ°ν™ν•©λ‹λ‹¤.

#### μ”μ²­ λ° μ‘λ‹µ μμ‹

- **μ”μ²­**

  ```
  PATCH http://localhost:3000/subscriptions/641bf3c9c0a964b65289902a
  Content-Type: application/json

  {
    "name": "λ„·ν”λ¦­μ¤ λ² μ΄μ§",
    "price": 9500
  }
  ```

- **μ‘λ‹µ**

  ```json
  HTTP/1.1 200 OK
  Content-Type: application/json

  {
    "_id": "641bf3c9c0a964b65289902a",
    "name": "λ„·ν”λ¦­μ¤ λ² μ΄μ§",
    "price": 9500,
    "cycle": "m",
    "firstPaymentDate": "2021-07-01T00:00:00.000Z",
    "memo": "10μΌλ‚  μ·¨μ†ν•κΈ°",
    "createdAt": "2023-03-23T06:34:11.617Z",
    "updatedAt": "2023-03-24T06:34:11.617Z"
  }
  ```

---

### π—‘οΈ Subscription μ‚­μ 

URLμ `:id`μ— ν•΄λ‹Ήν•λ” `Subscription` κ°μ²΄λ¥Ό μ‚­μ ν•©λ‹λ‹¤.

- **μ—”λ“ν¬μΈνΈ**: `DELETE /subscriptions/:id`

#### μ‘λ‹µ (Response)

- **μ„±κ³µ**: `204 No Content` μƒνƒ μ½”λ“λ¥Ό λ°ν™ν•λ©°, μ‘λ‹µ λ°”λ””λ” λΉ„μ–΄μμµλ‹λ‹¤.
- **μ‹¤ν¨**: μ—λ¬ μƒνƒ μ½”λ“μ™€ λ©”μ‹μ§€λ¥Ό λ°ν™ν•©λ‹λ‹¤.

#### μ”μ²­ λ° μ‘λ‹µ μμ‹

- **μ”μ²­**
  ```
  DELETE http://localhost:3000/subscriptions/641bf3c9c0a964b65289902a
  ```
- **μ‘λ‹µ**
  ```
  HTTP/1.1 204 No Content
  ```
