## βοΈ λ°μ΄ν„°μ μΌλ¶€λ§ μμ •ν•΄μ”: PATCH μ”μ²­ μ²λ¦¬ κ°€μ΄λ“

μ›Ή μ„λΉ„μ¤λ¥Ό μ΄μν•λ‹¤ λ³΄λ©΄ κΈ°μ΅΄ λ°μ΄ν„°μ μΌλ¶€λ§ μμ •ν•΄μ•Ό ν•  λ•κ°€ λ§μµλ‹λ‹¤. μλ¥Ό λ“¤μ–΄, ν•  μΌ(Task)μ μ™„λ£ μƒνƒλ¥Ό `false`μ—μ„ `true`λ΅ λ°”κΎΈκ±°λ‚, μ λ©λ§ μ‚΄μ§ λ³€κ²½ν•λ” κ²½μ°μ£ .

μ΄λ ‡κ² **κΈ°μ΅΄ λ¦¬μ†μ¤μ μΌλ¶€λ¥Ό μμ •**ν•  λ• μ‚¬μ©ν•λ” κ²ƒμ΄ λ°”λ΅ **`PATCH`** HTTP λ©”μ†λ“μ…λ‹λ‹¤.

### 1. PATCH μ”μ²­(Request)μ€ μ–΄λ–»κ² λ³΄λ‚ΌκΉμ”?

λ¨Όμ €, IDκ°€ 1μΈ ν•  μΌμ `isComplete` μƒνƒλ¥Ό `true`λ΅ λ³€κ²½ν•λ” `PATCH` μ”μ²­μ„ μ‘μ„±ν•΄ λ³΄κ² μµλ‹λ‹¤.

```http
PATCH http://localhost:3000/tasks/1
Content-Type: application/json

{
  "isComplete": true
}
```

- **`PATCH http://localhost:3000/tasks/1`**: μ–΄λ–¤ λ¦¬μ†μ¤(`tasks/1`)λ¥Ό μμ •ν• μ§€ URL νλΌλ―Έν„°λ΅ λ…ν™•ν μ§€μ •ν•κ³ , `PATCH` λ©”μ†λ“λ¥Ό μ‚¬μ©ν•©λ‹λ‹¤.
- **`Content-Type: application/json`**: μ”μ²­ λ³Έλ¬Έ(Body)μ— λ‹΄κΈ΄ λ°μ΄ν„° ν•μ‹μ΄ JSONμ„μ„ μ•λ ¤μ¤λ‹λ‹¤.
- **`{ "isComplete": true }`**: **μμ •ν•κ³  μ‹¶μ€ ν•„λ“μ™€ κ°’λ§** λ³Έλ¬Έμ— λ‹΄μ•„ λ³΄λƒ…λ‹λ‹¤. `title`μ΄λ‚ λ‹¤λ¥Έ λ‚΄μ©μ€ λ³΄λ‚΄μ§€ μ•μ•μΌλ―€λ΅, μ„λ²„λ” `isComplete` μƒνƒλ§ λ³€κ²½ν•΄μ•Ό ν•©λ‹λ‹¤.

### 2. Expressλ΅ PATCH λΌμ°νΈ λ§λ“¤κΈ°

μ΄μ  μ„λ²„μ—μ„ μ΄ μ”μ²­μ„ λ°›μ•„ μ²λ¦¬ν•λ” μ½”λ“λ¥Ό `app.js`μ— μ¶”κ°€ν•΄ λ΄…μ‹λ‹¤.

#### π’» μ „μ²΄ μ½”λ“

`app.patch('/tasks/:id', ...)` λΌμ°νΈ ν•Έλ“¤λ¬λ¥Ό μ¶”κ°€ν• μ „μ²΄ μ½”λ“λ” λ‹¤μκ³Ό κ°™μµλ‹λ‹¤.

```js
// node01-start-javascript-backend/todo-api/app.js
import express from 'express';
import tasks from './data/mock.js';

const app = express();
app.use(express.json());

// --- GET, POST λΌμ°νΈ (μ΄μ „κ³Ό λ™μΌ) ---
app.get('/tasks', (req, res) => {
  // ... (μƒλµ)
});

app.get('/tasks/:id', (req, res) => {
  // ... (μƒλµ)
});

app.post('/tasks', (req, res) => {
  // ... (μƒλµ)
});

// --- νΉμ • ν•  μΌμ μ •λ³΄ μμ •ν•κΈ° ---
app.patch('/tasks/:id', (req, res) => {
  // 1. URL νλΌλ―Έν„°μ—μ„ μμ •ν•  taskμ idλ¥Ό κ°€μ Έμµλ‹λ‹¤.
  const id = Number(req.params.id);
  const task = tasks.find((task) => task.id === id);

  // 2. ν•΄λ‹Ή idλ¥Ό κ°€μ§„ taskκ°€ μ΅΄μ¬ν•λ”μ§€ ν™•μΈν•©λ‹λ‹¤.
  if (task) {
    // 3. μ΅΄μ¬ν•λ‹¤λ©΄, μ”μ²­ λ³Έλ¬Έ(req.body)μ λ‚΄μ©μ„ κΈ°μ΅΄ task κ°μ²΄μ— λ®μ–΄μ”μ›λ‹λ‹¤.
    //    Object.keys()μ™€ forEachλ¥Ό μ‚¬μ©ν•΄ μ”μ²­ λ³Έλ¬Έμ— μλ” λ¨λ“  ν‚¤μ— λ€ν•΄ λ°λ³µν•©λ‹λ‹¤.
    Object.keys(req.body).forEach((key) => {
      // ex) keyκ°€ 'isComplete'λΌλ©΄, task['isComplete'] = req.body['isComplete'] κ°€ λ©λ‹λ‹¤.
      task[key] = req.body[key];
    });

    // 4. μμ •ν• μ‹κ°„μ„ κΈ°λ΅ν•κ³ , μ—…λ°μ΄νΈλ taskλ¥Ό ν΄λΌμ΄μ–ΈνΈμ— μ‘λ‹µμΌλ΅ λ³΄λƒ…λ‹λ‹¤.
    task.updatedAt = new Date();
    res.send(task);
  } else {
    // 2-1. μ΅΄μ¬ν•μ§€ μ•λ”λ‹¤λ©΄, 404 Not Found μ—λ¬λ¥Ό μ‘λ‹µν•©λ‹λ‹¤.
    res.status(404).send({ message: 'Cannot find given id.' });
  }
});

app.listen(3000, () => {
  console.log('Server started on port 3000');
  console.log(`http://localhost:3000`);
});
```

#### β¨ ν•µμ‹¬ λ΅μ§ νν—¤μΉκΈ°

`PATCH` μ”μ²­ μ²λ¦¬μ ν•µμ‹¬μ€ κΈ°μ΅΄ λ°μ΄ν„°μ— μƒλ΅μ΄ λ°μ΄ν„°λ¥Ό μ μ—°ν•κ² λ®μ–΄μ“°λ” κ²ƒμ…λ‹λ‹¤.

```javascript
Object.keys(req.body).forEach((key) => {
  task[key] = req.body[key];
});
```

- `Object.keys(req.body)`: μ”μ²­ λ³Έλ¬Έ κ°μ²΄(`{ "isComplete": true }`)μ ν‚¤(key)λ“¤μ„ λ°°μ—΄λ΅ λ§λ“­λ‹λ‹¤. `['isComplete']`
- `.forEach((key) => ...)`: μ΄ λ°°μ—΄μ„ μνν•λ©΄μ„ κ° ν‚¤μ— λ€ν•΄ ν•¨μλ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤.
- `task[key] = req.body[key]`: `task` κ°μ²΄μ μ†μ„±μ„ λ™μ μΌλ΅ μ—…λ°μ΄νΈν•©λ‹λ‹¤. `key`κ°€ `'isComplete'`λΌλ©΄, `task.isComplete`μ κ°’μ„ `req.body.isComplete`μ κ°’(`true`)μΌλ΅ λ³€κ²½ν•©λ‹λ‹¤.

μ΄ λ΅μ§ λ•λ¶„μ— ν΄λΌμ΄μ–ΈνΈκ°€ `title`λ§ λ³΄λ‚΄λ©΄ `title`λ§ λ°”λ€κ³ , `isComplete`μ™€ `description`μ„ ν•¨κ» λ³΄λ‚΄λ©΄ λ‘ ν•„λ“ λ¨λ‘κ°€ μ—…λ°μ΄νΈλλ” μ μ—°ν• APIκ°€ λ§λ“¤μ–΄μ§‘λ‹λ‹¤.

### 3. μ‹¤ν–‰ κ²°κ³Ό ν™•μΈν•κΈ°

μ„λ²„λ¥Ό μ‹¤ν–‰ν•κ³  `PATCH` μ”μ²­μ„ λ³΄λ‚΄μ„ λ°μ΄ν„°κ°€ μ •λ§ μμ •λλ”μ§€ ν™•μΈν•΄ λ΄…μ‹λ‹¤.

#### PATCH μ”μ²­ μ „ (ID: 1)

`isComplete`κ°€ `false`μΈ μƒνƒμ…λ‹λ‹¤.
\!

#### `PATCH /tasks/1` μ”μ²­ λ° μ‘λ‹µ

IDκ°€ 1μΈ ν•  μΌμ `isComplete`λ¥Ό `true`λ΅ λ³€κ²½ν•λ” μ”μ²­μ„ λ³΄λƒ…λ‹λ‹¤. μ„λ²„λ” μ„±κ³µμ μΌλ΅ μ²λ¦¬ν• ν›„ `200 OK` μƒνƒ μ½”λ“μ™€ ν•¨κ» λ³€κ²½λ κ°μ²΄λ¥Ό μ‘λ‹µμΌλ΅ λ³΄λ‚΄μ¤λ‹λ‹¤.

**[μ”μ²­]**

```http
PATCH http://localhost:3000/tasks/1
Content-Type: application/json

{
  "isComplete": true
}
```

**[μ‘λ‹µ]**

```json
HTTP/1.1 200 OK
// ...

{
  "id": 1,
  "title": "30λ¶„ μ΄λ™",
  "isComplete": true, // falseμ—μ„ trueλ΅ λ³€κ²½λ¨
  "createdAt": "2023-03-23T06:34:07.617Z",
  "updatedAt": "2025-08-21T07:14:15.612Z" // μμ •λ μ‹κ°„μΌλ΅ λ³€κ²½λ¨
}
```

#### PATCH μ”μ²­ ν›„

λ‹¤μ‹ `GET http://localhost:3000/tasks`λ΅ μ „μ²΄ λ©λ΅μ„ μ΅°νν•λ©΄, IDκ°€ 1μΈ ν•  μΌμ `isComplete`κ°€ `true`λ΅ μ™„μ „ν λ³€κ²½λ κ²ƒμ„ ν™•μΈν•  μ μμµλ‹λ‹¤.

### π’΅ μ•μ•„λ‘λ©΄ μΆ‹μ€ μ 

- **μ½”λ“ μ¤‘λ³µ**: `GET /tasks/:id`μ™€ `PATCH /tasks/:id`μ—μ„ νΉμ • IDμ `task`λ¥Ό μ°Ύλ” μ½”λ“κ°€ μ¤‘λ³µλ©λ‹λ‹¤. Expressμ λΌμ°ν… κΈ°λ¥μ„ λ” κΉκ² λ°°μ°λ©΄ μ΄λ° μ¤‘λ³µμ„ λ” κΉ”λ”ν•κ² μ²λ¦¬ν•  μ μμµλ‹λ‹¤.
- **λ°μ΄ν„° μ§€μ†μ„±**: ν„μ¬λ” λ©”λ¨λ¦¬μ— μλ” `mock.js` λ°°μ—΄μ„ μ‚¬μ©ν•κ³  μκΈ° λ•λ¬Έμ—, μ„λ²„λ¥Ό μ¬μ‹μ‘ν•λ©΄ μμ •ν–λ λ¨λ“  λ‚΄μ©μ΄ μ΄κΈ°ν™”λ©λ‹λ‹¤. μ΄ λ¬Έμ λ” λ‚μ¤‘μ— λ°μ΄ν„°λ² μ΄μ¤(DB)λ¥Ό μ—°λ™ν•λ©΄ μμ—°μ¤λ½κ² ν•΄κ²°λ©λ‹λ‹¤.

μ΄μ  μ—¬λ¬λ¶„μ API μ„λ²„λ” λ°μ΄ν„°λ¥Ό μ½κ³ , μƒμ„±ν•κ³ , μμ •ν•λ” λ€λ¶€λ¶„μ ν•µμ‹¬ κΈ°λ¥μ„ κ°–μ¶”κ² λμ—μµλ‹λ‹¤\! π‰
