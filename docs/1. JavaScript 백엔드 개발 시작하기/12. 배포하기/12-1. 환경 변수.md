## 🔑 내 소중한 비밀번호, .env 파일로 안전하게 관리하기

프로젝트를 진행하다 보면 API 키, 데이터베이스 비밀번호처럼 민감한 정보를 코드에 작성해야 할 때가 있습니다. 하지만 이 정보들을 코드에 그대로 남겨두고 GitHub에 올린다면, 마치 집 열쇠를 현관문 앞에 걸어두는 것과 같이 아주 위험한 상황이 발생할 수 있습니다. 😱

이런 민감한 정보(Secrets)를 코드와 안전하게 분리하여 관리하는 표준적인 방법이 바로 **`.env` 파일을 활용한 환경 변수 관리**입니다.

### 환경 변수(Environment Variable)가 뭔가요?

환경 변수는 간단히 말해, **코드가 실행되는 환경(내 컴퓨터, 테스트 서버, 실제 서비스 서버 등)에 따라 달라지는 외부 변수**입니다.

`dotenv`는 `.env`라는 파일에 이런 환경 변수들을 기록해두면, Node.js 프로젝트 어디서든 `process.env` 객체를 통해 접근할 수 있게 해주는 아주 편리한 라이브러리입니다.

---

### 🛡️ `.env` 파일 사용법 (Step-by-Step)

`dotenv` 라이브러리를 사용해 환경 변수를 설정하고 사용하는 전체 과정을 차근차근 알아봅시다.

#### 1단계: `dotenv` 라이브러리 설치하기

먼저, 프로젝트 터미널을 열어 `dotenv`를 설치합니다.

```bash
npm install dotenv
```

#### 2단계: `.env` 파일 생성 및 변수 작성

프로젝트의 최상위 경로(보통 `package.json`과 같은 위치)에 `.env` 파일을 새로 만듭니다. 그리고 그 안에 `변수명=값` 형식으로 민감한 정보를 기록합니다.

> **⚠️ 주의:** `.env` 파일 내부에서는 등호(=) 앞뒤로 공백이 없어야 하고, 값에 따옴표(`' '` 또는 `" "`)를 붙이지 않는 것이 관례입니다.

**`.env`**

```text
DATABASE_URL=mongodb+srv://<유저이름>:<비밀번호>@...
API_KEY=abcdef123456
```

#### 3단계: `.gitignore` 파일에 `.env` 추가 (가장 중요\!)

**이 단계가 빠지면 `.env`를 사용하는 의미가 없습니다.** `.gitignore` 파일은 Git이 특정 파일이나 폴더를 추적하지 못하도록 막는 역할을 합니다. 여기에 `.env`를 추가해서 민감 정보가 절대로 GitHub에 올라가지 않도록 설정해야 합니다.

**`.gitignore`**

```text
node_modules
.env
```

#### 4단계: 애플리케이션에 `dotenv` 설정하기

애플리케이션이 시작되는 파일(보통 `app.js`나 `index.js`)의 **가장 위쪽**에 아래 코드를 추가하여 `.env` 파일의 내용을 불러옵니다. 이 코드는 다른 어떤 코드보다도 먼저 실행되어야 합니다.

**`app.js`**

```javascript
import express from 'express';
import dotenv from 'dotenv';

// .env 파일의 내용을 process.env에 로드합니다.
dotenv.config();

const app = express();
// ... 이하 코드 생략
```

#### 5단계: 코드에서 환경 변수 사용하기

이제 프로젝트의 어떤 파일에서든 `process.env.변수명` 형태로 `.env` 파일에 정의했던 값을 안전하게 불러와 사용할 수 있습니다.

```javascript
// db.js
// 이전: const dbUrl = "mongodb+srv://..."; (위험!)
// 변경: const dbUrl = process.env.DATABASE_URL; (안전!)

mongoose
  .connect(process.env.DATABASE_URL)
  .then(() => console.log('MongoDB connected...'))
  .catch((err) => console.log(err));
```

---

### ✅ 협업을 위한 팁: `.env.example` 파일 만들기

`.env` 파일은 Git에 올리지 않기 때문에, 다른 팀원들은 이 프로젝트에 어떤 환경 변수가 필요한지 알 수 없습니다. 이를 위해 **`.env.example`** 파일을 만들어주는 것이 좋은 협업 습관입니다.

이 파일에는 실제 비밀 값은 빼고, 어떤 변수들이 필요한지만 기록하여 Git에 함께 올립니다.

**`.env.example`**

```text
DATABASE_URL=
API_KEY=
```

이렇게 하면 팀원들은 `.env.example` 파일을 복사하여 `.env` 파일을 만들고, 자신의 환경에 맞는 실제 값들을 채워 넣어 프로젝트를 쉽게 설정할 수 있습니다.

이제 여러분의 소중한 정보들을 안전하게 지키면서 개발하는 습관을 들여보세요\! 🎉
