## 📜 데이터의 설계도, 스키마(Schema) 정의하기

Mongoose로 데이터를 다루기 위한 첫 단계는 바로 **스키마(Schema)** 를 정의하는 것입니다.

스키마는 우리가 데이터베이스에 저장할 **데이터가 어떤 구조와 규칙을 가져야 하는지를 정의하는 '설계도'** 또는 '틀'입니다. 예를 들어, '할 일(Task)' 데이터는 반드시 '제목(title)'을 가져야 하고, '완료 여부(isComplete)'는 참/거짓(Boolean) 값이어야 한다는 규칙을 정하는 것이죠.

### 1단계: 모델 파일 생성하기

먼저 프로젝트에 `models`라는 폴더를 만들고, 그 안에 `Task.js` 파일을 생성합니다. 앞으로 `Task` 데이터와 관련된 모든 설계와 규칙은 이 파일에서 관리하게 됩니다.

> **📂 `models` 폴더?**
> Mongoose의 모델 정의 코드를 별도의 파일로 분리하여 `models` 폴더에 모아두는 것은 Node.js 프로젝트의 표준적인 구조입니다.

### 2단계: 스키마 설계하기

이제 `Task.js` 파일 안에서 Mongoose를 이용해 스키마를 직접 설계해 보겠습니다.

```javascript
// /models/Task.js
import mongoose from 'mongoose';

// 'Task' 데이터의 설계도(Schema)를 정의합니다.
const TaskSchema = new mongoose.Schema(
  // 1. 데이터의 필드(속성)와 규칙을 정의하는 객체
  {
    title: {
      type: String, // 제목은 문자열 타입
    },
    description: {
      type: String, // 설명도 문자열 타입
    },
    isComplete: {
      type: Boolean, // 완료 여부는 Boolean 타입
      default: false, // 기본값은 false (미완료)
    },
  },
  // 2. 스키마 옵션
  {
    timestamps: true, // createdAt, updatedAt 타임스탬프 자동 생성
  }
);
```

#### **스키마 구조 살펴보기**

`new mongoose.Schema()` 안에는 두 개의 객체가 인자로 전달됩니다.

1.  **필드 정의 객체**: 우리가 다룰 데이터의 실제 필드와 규칙을 정의합니다.
    - `title`, `description`, `isComplete`와 같은 각 필드의 이름과 함께 `type`(데이터 타입), `default`(기본값) 등의 규칙을 설정할 수 있습니다.
    - `id` 필드는 MongoDB가 자동으로 생성해주므로 따로 정의할 필요가 없습니다.
2.  **스키마 옵션 객체**: 스키마 전체에 적용될 옵션을 설정합니다.
    - `timestamps: true` 옵션을 추가하면, 데이터가 생성되거나 업데이트될 때마다 Mongoose가 자동으로 `createdAt`(생성 시각)과 `updatedAt`(수정 시각) 필드를 추가하고 관리해줍니다. 매우 편리한 기능이니 꼭 기억해두세요\!

### 3단계: 모델 만들기

설계도(Schema)를 다 만들었으니, 이제 이 설계도를 바탕으로 실제 데이터를 만들고, 읽고, 수정하고, 삭제할 수 있는 **모델(Model)** 을 만들 차례입니다. 모델은 스키마를 현실 세계의 데이터베이스와 상호작용하게 해주는 인터페이스입니다.

```javascript
// /models/Task.js (TaskSchema 아래에 추가)

// TaskSchema를 기반으로 하는 'Task' 모델을 생성합니다.
const Task = mongoose.model('Task', TaskSchema);
```

> **✨ Mongoose의 마법 같은 네이밍 규칙\!** > `mongoose.model()`의 첫 번째 인자로 전달하는 이름은 매우 중요합니다.
>
> - `'Task'`처럼 **첫 글자는 대문자, 단수형**으로 이름을 지정하는 것이 관례입니다.
> - Mongoose는 이 이름을 바탕으로, 데이터베이스에 있는 **소문자, 복수형** 이름의 컬렉션(`tasks`)을 자동으로 찾아 연결해줍니다. (`Task` -\> `tasks`)

### 4단계: 모델 내보내기

마지막으로, 생성한 `Task` 모델을 다른 파일에서도 사용할 수 있도록 `export` 해줍니다.

```javascript
// /models/Task.js (파일 맨 아래에 추가)

// 다른 파일에서 Task 모델을 사용할 수 있도록 export 합니다.
export default Task;
```

---

### ✅ 최종 코드

지금까지의 과정을 모두 반영한 `models/Task.js` 파일의 전체 코드는 다음과 같습니다.

```javascript
// /models/Task.js
import mongoose from 'mongoose';

const TaskSchema = new mongoose.Schema(
  {
    title: {
      type: String,
    },
    description: {
      type: String,
    },
    isComplete: {
      type: Boolean,
      default: false,
    },
  },
  {
    timestamps: true,
  }
);

const Task = mongoose.model('Task', TaskSchema);

export default Task;
```

이제 우리는 이 `Task` 모델을 가지고 데이터베이스에 할 일을 추가하거나 조회하는 등 다양한 작업을 할 준비를 마쳤습니다\! 🎉
