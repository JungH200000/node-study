## GET /tasks - Task 목록 조회 API 만들기

이제 본격적으로 To-Do API의 첫 번째 기능인 **'전체 Task 목록 조회'** API를 만들어 보겠습니다.

실제 데이터베이스 연동은 나중에 다룰 예정이므로, 지금은 미리 준비된 **테스트용 가짜 데이터(Mock Data)** 를 사용하여 라우트를 구현하는 과정에 집중하겠습니다.

### 1\. 테스트용 Mock 데이터 준비하기

먼저, 프로젝트에 `data` 폴더를 만들고 그 안에 `mock.js` 파일을 생성하여 아래와 같이 테스트 데이터를 작성합니다. 이 데이터는 5개의 Task 객체를 담고 있는 배열입니다.

```javascript
// node01-start-javascript-backend/todo-api/data/mock.js
const data = [
  {
    id: 1,
    title: '30분 운동',
    isComplete: false,
    createdAt: new Date('2023-03-23T06:34:07.617Z'),
    updatedAt: new Date('2023-03-23T06:34:07.617Z'),
  },
  {
    id: 2,
    title: '리액트 공부',
    description: 'Tic Tac Toe 게임 완성하기',
    isComplete: true,
    createdAt: new Date('2023-03-23T06:34:08.617Z'),
    updatedAt: new Date('2023-03-23T06:34:08.617Z'),
  },
  // ... (총 5개의 Task 객체)
];

export default data;
```

_각 Task 객체는 `id`, `title`, `isComplete` 등의 필드를 가지며, `description` 필드는 선택 사항(Optional)입니다._

### 2\. `GET /tasks` 라우트 구현하기

다음으로, `app.js` 파일에서 방금 만든 `mock.js` 파일을 `import` 하여 `/tasks` 경로로 `GET` 요청이 들어왔을 때 전체 Task 목록을 응답으로 보내주도록 라우트를 정의합니다.

```javascript
// node01-start-javascript-backend/todo-api/app.js
import express from 'express';
import tasks from './data/mock.js'; // Mock 데이터 가져오기

const app = express();

// GET /tasks 라우트 정의
app.get('/tasks', (req, res) => {
  res.send(tasks);
});

app.listen(3000, () => console.log('Server started on port 3000'));
```

### 3\. API 테스트하기

이제 `requests.http` 파일에서 요청할 주소를 수정하고, `npm run dev`로 서버를 실행한 뒤 API를 테스트해 보겠습니다.

```http
// requests.http
GET http://localhost:3000/tasks
```

`Send Request` 버튼을 클릭하면 아래와 같이 Task 목록 전체가 JSON 형태로 성공적으로 응답 오는 것을 확인할 수 있습니다.

**✅ 응답 (Response)**

```json
HTTP/1.1 200 OK
Content-Type: application/json; charset=utf-8
...

[
  {
    "id": 1,
    "title": "30분 운동",
    "isComplete": false,
    "createdAt": "2023-03-23T06:34:07.617Z",
    "updatedAt": "2023-03-23T06:34:07.617Z"
  },
  {
    "id": 2,
    "title": "리액트 공부",
    "description": "Tic Tac Toe 게임 완성하기",
    "isComplete": true,
    "createdAt": "2023-03-23T06:34:08.617Z",
    "updatedAt": "2023-03-23T06:34:08.617Z"
  },
  ...
]
```

---

### ✨ Express의 마법: `res.send()`의 자동 변환

여기서 아주 중요한 점이 있습니다. 우리가 `res.send()`에 인자로 전달한 `tasks`는 **JavaScript 객체 배열**이지만, 실제로 클라이언트가 받은 응답은 **JSON 형식의 문자열**이라는 것입니다.

> **💡 JavaScript 객체 vs JSON 문자열**
>
> 인터넷을 통해 데이터를 주고받을 때는 JavaScript 객체 형태 그대로 보낼 수 없으므로, 모든 프로그래밍 언어가 이해할 수 있는 표준 데이터 형식인 **JSON(JavaScript Object Notation) 문자열**을 주로 사용합니다.
>
> `new Date(...)` 와 같은 JavaScript 고유의 객체도 JSON으로 전송될 때는 `"2023-03-23T06:34:07.617Z"` 와 같은 국제 표준(ISO 8601) 문자열로 변환됩니다.

그렇다면 어떻게 JavaScript 객체가 JSON 형식으로 자동으로 변환된 걸까요? 바로 Express의 `res.send()` 메서드가 이 역할을 해주기 때문입니다.

`res.send()`는 두 가지 편리한 기능을 자동으로 처리해 줍니다.

1.  **자동 JSON 변환**: 인자로 JavaScript 객체나 배열을 받으면, 이를 JSON 형식의 문자열로 변환하여 응답 본문(Response Body)에 담아줍니다.
2.  **자동 `Content-Type` 설정**: 전달되는 데이터의 종류에 맞춰 `Content-Type` 자체를 지능적으로 자동 설정해 줍니다. 응답 내용이 JSON 형식이라면, HTTP 헤더에 `Content-Type: application/json` 설정을 자동으로 추가해 줍니다. 이 헤더 덕분에 클라이언트는 "아, 이 데이터는 JSON 형식이구나\!"라고 인식하고 올바르게 처리할 수 있습니다.

이처럼 Express에 내장된 편리한 기능들 덕분에 우리는 번거로운 변환 과정 없이 API를 더 쉽게 개발할 수 있습니다.
