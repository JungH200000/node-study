## 🏗️ 초보자를 위한 소프트웨어 아키텍처: MVC와 계층형 아키텍처

프로젝트 구조에 대해 공부하다 보면 **MVC 패턴**과 **계층형 아키텍처(Layered Architecture)** 라는 용어를 자주 만나게 됩니다. 이 두 가지는 소프트웨어를 설계할 때 코드를 어떻게 정리하고 구성할지에 대한 일종의 '청사진'입니다.

이번 글에서는 이 두 가지 아키텍처가 무엇인지, 그리고 왜 우리에게 이런 '청사진'이 필요한지 알아보겠습니다.

---

### 아키텍처는 왜 필요한가요?

프로젝트 초반에는 코드가 단순하지만, 기능이 추가될수록 점점 거대해지고 복잡해집니다. 별다른 계획 없이 코드를 계속 덧붙이다 보면, 모든 로직이 뒤엉킨 하나의 거대한 코드 덩어리, 이른바 **'스파게티 코드'** 가 되기 쉽습니다. 이런 코드는 다음과 같은 문제점을 낳습니다.

- **유지보수 👎**: 작은 기능 하나를 수정했는데, 예상치 못한 다른 기능에서 오류가 발생합니다.
- **가독성 👎**: 코드가 뒤섞여 있어 전체 흐름을 파악하기 어렵고, 새로운 팀원이 적응하기 힘듭니다.
- **재사용성 👎**: 특정 기능을 다른 곳에서 다시 사용하고 싶어도, 분리하기가 너무 어렵습니다.
- **테스트 👎**: 기능들이 서로 너무 얽혀있어, 특정 기능 하나만 떼어내어 테스트하기가 거의 불가능합니다.

이런 문제를 해결하기 위해, 코드를 역할과 책임에 따라 체계적으로 분리하고 정리하는 설계 방법론, 즉 **아키텍처**가 필요합니다.

---

### MVC 패턴: 역할을 나누는 세 명의 전문가

**MVC**는 **Model, View, Controller**의 앞 글자를 딴 것으로, 애플리케이션을 세 가지 역할로 나누어 개발하는 설계 방식입니다. 마치 각자의 전문 분야가 있는 세 명의 전문가가 협업하는 것과 같습니다.

#### 🧍‍♂️ **Model (데이터 전문가)**

- **역할**: 애플리케이션의 **데이터**와 **핵심 비즈니스 로직**을 담당합니다.
- **상세**: 데이터베이스와 상호작용하여 데이터를 저장하고, 읽고, 수정하고, 삭제(CRUD)합니다. 데이터의 유효성을 검사하거나, 주문 시 상품 재고를 줄이는 등의 핵심 규칙을 처리합니다.
- **쇼핑몰 예시**: '상품', '주문', '사용자' 데이터를 관리하고, 주문이 들어오면 상품 재고를 1 감소시키는 로직을 수행합니다.

#### 🎨 **View (디자인 전문가)**

- **역할**: 사용자에게 보여지는 **화면(UI)** 을 담당합니다.
- **상세**: Model로부터 받은 데이터를 사용자가 보기 좋게 화면에 그려주거나, 사용자의 행동(버튼 클릭 등)을 Controller에게 알려주는 역할을 합니다.
- **쇼핑몰 예시**: '상품 목록 페이지', '상품 상세 페이지'를 보여주며, 사용자가 '장바구니 담기' 버튼을 누르면 그 사실을 Controller에게 전달합니다.

#### 🎮 **Controller (중재자/지휘자)**

- **역할**: Model과 View 사이의 흐름을 제어하는 **중재자** 역할을 합니다.
- **상세**: View를 통해 사용자의 요청을 받고, 그에 맞는 Model의 기능을 호출합니다. Model이 데이터를 처리하고 나면, 그 결과를 다시 View에게 전달하여 사용자 화면에 변화가 나타나도록 지시합니다.
- **쇼핑몰 예시**: '장바구니 담기' 요청을 받으면, Model에게 "이 상품을 장바구니 데이터에 추가해줘"라고 지시합니다. 작업이 완료되면 View에게 "장바구니에 상품이 추가되었다고 사용자에게 보여줘"라고 전달합니다.

---

### 계층형 아키텍처: 층층이 쌓아 올린 건물

**계층형 아키텍처(Layered Architecture)** 는 애플리케이션의 기술적인 관심사를 여러 개의 수평적인 **계층(Layer)** 으로 분리하는 구조입니다. 각 층은 정해진 역할만 수행하며, 바로 아래층에만 의존하는 '하향식' 구조를 가집니다. 마치 잘 지어진 건물처럼 각 층이 자기 역할을 하는 것과 같습니다.

#### 🏢 **Presentation Layer (1층: 로비 & 안내 데스크)**

- **역할**: 사용자와 가장 가까운 계층으로, 요청(Request)을 받고 응답(Response)을 보내는 역할을 전담합니다.
- **상세**: 사용자의 입력을 받고, 그 요청을 아래층인 Business Layer로 전달합니다. Business Layer에서 처리된 결과를 받아와 사용자에게 보여줍니다.
- **쇼핑몰 예시**: 사용자의 "장바구니 담기" HTTP 요청을 받아 유효성을 검사한 뒤, 필요한 데이터를 정리하여 Business Layer로 넘겨줍니다.

#### 👔 **Business Layer (2층: 사무실)**

- **역할**: 애플리케이션의 **실질적인 비즈니스 로직**을 처리합니다.
- **상세**: Presentation Layer로부터 받은 데이터를 가공하여 실제 업무 규칙을 수행합니다. 필요하다면 아래층인 Persistence Layer에 데이터 저장을 요청합니다.
- **쇼핑몰 예시**: "장바구니에 담기" 요청을 받아, 해당 상품의 재고가 있는지 확인하고, 총금액을 계산하는 등의 실제 로직을 수행합니다.

#### 🗄️ **Persistence Layer (3층: 자료 보관실)**

- **역할**: **데이터베이스와의 통신**을 전담합니다. Repository 계층이라고도 불립니다.
- **상세**: Business Layer의 요청에 따라 데이터베이스에 데이터를 저장(Create), 조회(Read), 수정(Update), 삭제(Delete)하는 작업을 수행합니다.
- **쇼핑몰 예시**: "장바구니에 이 상품 정보를 저장해줘"라는 요청을 받아, 실제 데이터베이스에 SQL 쿼리를 실행합니다.

#### 💾 **Database Layer (지하: 데이터 금고)**

- **역할**: 데이터가 물리적으로 저장되는 **데이터베이스** 자체를 의미합니다.

---

### 헷갈리기 쉬운 질문들

#### Q1: MVC 패턴과 계층형 아키텍처, 둘은 같은 건가요?

아니요, 둘은 서로 다른 관점을 가진 다른 구조입니다.

- **MVC 패턴**은 **사용자 인터페이스** 관점에서 '입력-처리-출력'의 역할을 어떻게 나눌지에 초점을 맞춥니다.
- **계층형 아키텍처**는 **데이터 흐름** 관점에서 '요청-로직-저장'의 기술적인 책임을 어떻게 나눌지에 초점을 맞춥니다.

#### Q2: 둘 중 하나만 선택해야 하나요?

아니요, 함께 적용할 수 있으며, 실제로 그렇게 많이 사용됩니다. 가장 일반적인 조합은 **계층형 아키텍처의 Presentation Layer를 MVC 패턴으로 구현**하는 것입니다. 즉, Controller가 사용자의 요청을 받아 Business Layer로 전달하고, Business Layer의 처리 결과를 Model에 담아 View를 통해 사용자에게 보여주는 구조입니다.

#### Q3: 이 구조들을 꼭 그대로 따라야 하나요?

아니요, 이들은 가이드라인일 뿐입니다. 프로젝트의 규모나 복잡도, 팀의 스타일에 따라 계층을 합치거나 더 세분화하는 등 유연하게 변형할 수 있습니다. 중요한 것은 '왜' 역할을 나누는지 이해하고, 프로젝트에 가장 적합한 구조를 선택하는 것입니다.

---

### 핵심 요약

> - 소프트웨어 아키텍처(MVC, 계층형 등)는 복잡한 코드를 **유지보수하고, 읽고, 재사용하고, 테스트하기 쉽게** 만들기 위한 설계 '청사진'입니다.
> - **MVC 패턴**은 애플리케이션을 **Model(데이터), View(화면), Controller(중재자)** 라는 세 가지 역할로 분리하여 사용자 인터페이스 로직을 체계적으로 관리합니다.
> - **계층형 아키텍처**는 애플리케이션을 **Presentation, Business, Persistence** 등 기술적인 책임에 따라 여러 개의 독립적인 층으로 분리하여 데이터의 흐름을 관리합니다.
> - 두 패턴은 서로 배타적이지 않으며, **함께 조합하여** 더 견고하고 확장성 있는 애플리케이션을 만들 수 있습니다.
