## OAuth 여정의 시작: 4명의 주인공과 2가지 준비물

지난 글에서 우리는 `ChatGPT`가 `구글 캘린더` 정보에 접근하기 위해 OAuth를 사용해야 한다는 것을 배웠습니다. 본격적으로 OAuth의 작동 흐름을 알아보기 전에, 이 과정에 등장하는 **4명의 주인공(주체)** 과, 시작에 앞서 **반드시 필요한 2가지 준비물(설정)** 에 대해 먼저 알아보겠습니다.

---

### 👨‍👩‍👧‍👦 OAuth 연극의 주인공들을 소개합니다

OAuth는 여러 주체가 각자의 역할을 수행하며 진행되는 하나의 연극과 같습니다. 우리 시나리오에 4명의 주인공을 대입해 봅시다.

1.  **리소스 소유자 (Resource Owner)**: 바로 **'사용자'** 본인입니다. 보호된 리소스(구글 캘린더 데이터)의 주인입니다.
2.  **클라이언트 (Client)**: 리소스 소유자를 대신하여 리소스에 접근하려는 **제3자 애플리케이션**입니다. 우리 예시에서는 **`ChatGPT`** 가 클라이언트입니다.
3.  **인가 서버 (Authorization Server)**: 리소스 소유자로부터 접근 동의를 받아, 클라이언트에게 접근 토큰(Access Token)을 발급해주는 **권한 담당 서버**입니다. 예시에서는 **`구글의 로그인 및 권한 동의 페이지`** 를 담당하는 서버가 여기에 해당합니다.
4.  **리소스 서버 (Resource Server)**: 보호된 리소스가 실제로 저장되어 있는 서버입니다. 클라이언트가 접근 토큰을 제시하면, 이를 검증하고 요청받은 리소스를 제공합니다. 예시에서는 **`구글 캘린더 데이터 API 서버`** 가 여기에 해당합니다.

---

### 📝 본격적인 시작 전, 2가지 약속과 준비물

클라이언트(`ChatGPT`)가 사용자에게 권한을 요청하기 전에, 먼저 인가 서버(`구글`)에 **"안녕하세요, 저는 ChatGPT입니다. 앞으로 당신의 서비스를 이용하고 싶습니다."** 라고 정식으로 등록하는 절차가 필요합니다.

#### **준비물 1: 클라이언트 등록 (`Client ID` & `Client Secret`)**

`ChatGPT`는 구글 개발자 콘솔과 같은 곳에서 자신의 서비스를 등록해야 합니다. 이 과정이 완료되면, 구글 인가 서버는 `ChatGPT`에게 두 가지 중요한 정보를 발급해줍니다.

- **`Client ID`**: 사람으로 치면 '아이디'입니다. 여러 클라이언트 중에서 `ChatGPT`를 식별하기 위한 공개된 값입니다.
- **`Client Secret`**: 사람으로 치면 '비밀번호'입니다. `ChatGPT`가 정말 본인이 맞다는 것을 증명하기 위해 사용하는 비밀값으로, **절대로 외부에 노출되어서는 안 됩니다.**

`ChatGPT`는 이 두 값을 자신의 백엔드 서버에 안전하게 저장해 두어야 합니다.

#### **준비물 2: 권한 범위 설정 (`Scope`)**

`ChatGPT`는 사용자에게 어떤 권한을 요청할 것인지 그 **범위(Scope)** 를 미리 명확하게 정해두어야 합니다.

- **좋은 Scope 예시**: "캘린더 일정 읽기", "캘린더 일정 추가 및 수정"
- **나쁜 Scope 예시**: "사용자의 모든 구글 데이터에 대한 전체 권한"

**'최소 권한의 원칙'** 에 따라, 클라이언트는 서비스 제공에 정말 **필요한 최소한의 권한만 요청**해야 합니다. 만약 `ChatGPT`가 캘린더 접근 권한만 있으면 되는데, 사용자의 Gmail과 구글 드라이브 접근 권한까지 모두 요청한다면 사용자는 그 요청을 신뢰하기 어려울 것입니다. Scope를 통해 권한의 범위를 명확히 함으로써, 사용자는 자신이 어떤 권한을 위임하는지 정확히 알 수 있고, 리소스 서버는 허가된 범위 밖의 위험한 요청을 거부할 수 있습니다.

---

### ✍️ 마무리하며

- OAuth의 흐름을 이해하기 위해 먼저 **4명의 주인공**을 알아봤습니다: **리소스 소유자(사용자), 클라이언트(앱), 인가 서버, 리소스 서버**.
- OAuth를 사용하기 전, 클라이언트는 인가 서버에 미리 자신을 등록하여 **`Client ID`와 `Client Secret`** 을 발급받아야 합니다.
- 또한, 클라이언트는 사용자에게 요청할 **권한의 범위(`Scope`)** 를 명확하게 정의해야 합니다.

이제 모든 주인공과 준비물이 갖춰졌습니다. 다음 글에서는 이들을 가지고 실제로 OAuth가 어떻게 진행되는지 그 여정을 따라가 보겠습니다.
