## 회원가입과 로그인은 어떻게 작동할까? (인증의 모든 것) 🔐

웹 서비스의 '사용자 기능' 중 가장 기본이 되는 **인증(Authentication)** 은, 서버가 요청을 보낸 사용자가 **'누구인지 확인'** 하는 과정입니다. 이번 글에서는 이 인증 기능이 어떤 흐름으로 동작하는지 그 원리를 단계별로 알아보겠습니다.

---

### 1단계: 사용자를 기억하기 위한 '명찰' 만들기 (유저 모델)

서버가 사용자를 알아보려면, 먼저 사용자에 대한 정보를 저장해 둘 '양식'이 필요합니다. 이를 **'유저 모델(User Model)'** 이라고 부르며, 사용자의 정보를 담는 일종의 '명찰' 또는 '회원카드 양식'이라고 생각할 수 있습니다.

이 명찰에는 여러 정보가 들어갈 수 있지만, 가장 중요한 두 가지는 다음과 같습니다.

1.  **고유 식별자 (ID)**: 다른 사람과 겹치지 않는 유일한 값입니다. 요즘은 사용자가 기억하기 쉽도록 아이디(Username) 대신 **이메일 주소**를 주로 사용합니다.
2.  **비밀번호 (Password)**: 해당 사용자만 알고 있는 비밀 정보입니다. 이 정보는 매우 중요하므로, 반드시 **암호화**하여 서버에 저장해야 합니다.

---

### 2단계: 첫 방문 손님 등록하기 (회원가입 흐름)

사용자가 우리 서비스에 처음 방문해서 정보를 등록하는 '회원가입'은, 위에서 만든 '명찰(유저 모델)'에 내용을 채워 서버에 저장하는 과정입니다.

1.  **정보 입력**: 사용자는 웹사이트의 회원가입 페이지에서 이메일, 비밀번호 등 필요한 정보를 입력하고 '가입하기' 버튼을 누릅니다.
2.  **서버에 생성 요청**: 클라이언트(브라우저)는 입력받은 정보를 담아, 서버의 회원가입 API로 "이 정보로 새로운 사용자를 만들어주세요!" (`POST`) 요청을 보냅니다.
3.  **유효성 검사**: 서버는 요청받은 정보를 검증합니다. (예: 이미 가입된 이메일은 아닌지? 비밀번호는 충분히 안전한지?)
4.  **데이터베이스에 저장**: 검증을 통과하면, 서버는 사용자의 비밀번호를 암호화하여 데이터베이스에 저장합니다. 이때, 서버는 내부적으로 사용자를 더 효율적으로 관리하기 위해 고유한 **숫자 ID** (예: 1, 2, 3...)를 자동으로 부여합니다.
    > 💡 **이메일 vs. 숫자 ID**
    >
    > - **이메일**: 사용자가 **로그인**할 때 자신을 식별하는 용도로 사용됩니다.
    > - **숫자 ID**: 서버가 내부적으로 사용자를 **관리**할 때 중복 없이 빠르게 찾기 위한 용도로 사용됩니다.
5.  **결과 응답**: 모든 과정이 성공적으로 끝나면, 서버는 클라이언트에게 '회원가입 성공' 응답을 보내줍니다. 실패했다면 '실패' 응답을 보내겠죠.

이제 사용자는 우리 서비스에 정식으로 등록되었으며, 언제든 로그인할 준비를 마쳤습니다!

---

### 3단계: 단골손님 알아보기 (로그인과 '출입증' 발급)

회원가입을 마친 사용자가 다시 서비스를 방문했을 때, 우리는 그가 누구인지 알아봐야 합니다. 이 과정이 바로 '로그인'이며, 성공 시 특별한 **'출입증'** 을 발급해주는 과정까지 포함합니다.

1.  **정보 입력**: 사용자는 로그인 페이지에서 자신의 이메일과 비밀번호를 입력합니다.
2.  **서버에 인증 요청**: 클라이언트는 입력받은 정보를 담아, 서버의 로그인 API로 "이 사람 회원 맞는지 확인해주세요!" 요청을 보냅니다.
3.  **정보 확인 및 출입증 발급**:
    - 서버는 요청받은 이메일로 데이터베이스에서 사용자를 찾습니다.
    - 해당 사용자를 찾았다면, 함께 온 비밀번호가 저장된 암호화된 비밀번호와 일치하는지 확인합니다.
    - 모든 정보가 일치하면, 서버는 "네, 우리 회원이 맞습니다!"라는 성공 응답과 함께, 아주 중요한 **문자열 형태의 '출입증'** 을 함께 보내줍니다.
    - 정보가 일치하지 않으면, "회원 정보가 틀렸습니다"라는 에러 응답을 보냅니다.

---

### '출입증'은 어떻게 작동할까? (로그인 상태 유지의 비밀)

로그인 시 서버가 발급해준 **'출입증'**(보통 **토큰(Token)** 또는 **세션 ID**라고 부릅니다)이 바로 **로그인 상태를 유지하는 비밀 열쇠**입니다.

> **마치 놀이공원 자유이용권 팔찌와 같아요! 🎡**
>
> 놀이공원에 들어갈 때 한 번 신분증으로 나이를 확인하고 나면, 하루 종일 팔찌만 보여주고 모든 놀이기구를 이용할 수 있습니다. 매번 신분증을 꺼낼 필요가 없죠. '출입증'도 이와 똑같습니다.

- **출입증 보관 및 제시**: 클라이언트는 서버로부터 받은 '출입증'을 컴퓨터(브라우저)에 안전하게 보관합니다. 그리고 이후 서버에 요청을 보낼 때마다 이 '출입증'을 함께 첨부해서 보냅니다.
- **서버의 신원 확인**: 서버는 요청이 올 때마다 함께 온 '출입증'을 보고 "아, 이 요청은 Chung이 보낸 거구나!" 하고 즉시 알아차립니다. 더 이상 이메일과 비밀번호를 물어보지 않아도 되죠.
- **유효기간**: 이 출입증에는 보통 **유효기간**이 있습니다. 보안을 위해 특정 시간이 지나면 출입증은 만료되어 더 이상 사용할 수 없게 됩니다. 이때 우리는 "세션이 만료되었습니다"라는 메시지를 보게 되며, 다시 이메일과 비밀번호를 입력하여 새로운 출입증을 발급받아야 합니다(재로그인).

---

### ✍️ 마무리하며

지금까지 사용자가 우리 서비스를 이용하기 위한 인증의 전체적인 흐름을 살펴보았습니다.

- **회원가입**을 통해 서버는 사용자를 **최초로 등록**하고,
- **로그인**을 통해 사용자가 **본인임을 확인**한 뒤 특별한 **'출입증'(토큰 등)을 발급**합니다.
- 클라이언트는 이후의 모든 요청에 이 **'출입증'을 함께 보내** 로그인 상태를 유지합니다.

이 큰 흐름은 대부분 비슷하지만, '출입증'을 어떤 종류로 만들고 어떻게 관리하는지에 따라 **세션 기반 인증**, **토큰 기반 인증(JWT)** 등 다양한 방식으로 나뉩니다. 다음 글에서는 바로 이 구체적인 인증 방식들에 대해 더 자세히 알아보겠습니다.
