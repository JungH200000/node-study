## 좋은 API의 완성, '친절한 사용 설명서' 작성하기 (API 문서화) ✍️

지금까지 우리는 좋은 API를 설계하기 위한 REST 원칙과 여러 모범 사례를 알아봤습니다. 멋진 API를 모두 만들었다면, 이제 마지막으로 해야 할 가장 중요한 작업은 무엇일까요? 바로 API를 사용하는 다른 개발자들을 위해 **'친절한 사용 설명서', 즉 API 문서를 만드는 것**입니다.

### 🤝 API 문서화, 왜 필요할까요?

API를 만든 개발자는 모든 기능을 속속들이 알고 있지만, 처음 사용하는 개발자는 그렇지 않습니다. 어떤 주소(Endpoint)로 요청을 보내야 하는지, 어떤 데이터를 함께 보내야 하는지 전혀 알 수 없죠.

이런 정보를 회의를 통해 말로 전달하는 것은 비효율적이고 실수가 발생하기 쉽습니다. 따라서 우리는 잘 정리된 '문서'를 통해 API의 사용법을 공유해야 합니다. API 문서는 API를 사용하는 모든 개발자를 위한 **공식적인 약속이자 가이드**입니다.

---

### 📖 좋은 API 문서에 꼭 들어가야 할 6가지 요소

#### 1\. 엔드포인트 (Endpoint)

API의 가장 기본이 되는 주소와 사용 가능한 HTTP 메서드를 명확하게 보여줘야 합니다.

- `POST /members` : 새로운 멤버를 생성합니다.
- `GET /members` : 모든 멤버의 목록을 조회합니다.

같은 주소라도 HTTP 메서드에 따라 전혀 다른 동작을 하므로, **어떤 동작을 원하는지에 따라 어떤 메서드를 사용해야 하는지** 정확히 명시해야 합니다.

---

#### 2\. 요청 파라미터 (Request Parameters)

요청을 보낼 때 본문(Body)이나 쿼리(Query)에 어떤 값을 담아 보내야 하는지 상세하게 설명해야 합니다.

- **`name`**: `string` **(필수)** - 멤버의 이름을 나타냅니다.
- **`active`**: `boolean` (선택, 기본값: `true`) - 멤버의 활성화 상태를 나타냅니다.

각 파라미터의 **데이터 타입, 필수 여부, 기본값, 그리고 어떤 역할을 하는지**에 대한 설명을 포함해야 합니다.

---

#### 3\. 응답 (Responses)

요청이 성공했을 때와 실패했을 때, 각각 어떤 상태 코드와 데이터를 응답으로 받게 되는지 보여줘야 합니다.

- **성공 응답 예시: `201 Created`**

  ```json
  {
    "id": 2,
    "name": "Emily",
    "active": false
  }
  ```

- **실패 응답 예시: `400 Bad Request`**

  ```json
  {
    "message": "field 'name' is required."
  }
  ```

---

#### 4\. 인증 (Authentication)

API를 사용하기 위해 인증이 필요하다면, 인증을 위한 API 키나 토큰을 어떻게 발급받고, 요청 시 어떻게 사용해야 하는지를 안내해야 합니다.

```http
GET /users
Authorization: Bearer {YOUR_API_KEY}
```

---

#### 5\. 사용 예시 (Code Examples)

실제 API를 어떻게 호출하고 사용하는지 보여주는 코드 예시는 다른 개발자들의 이해를 돕는 가장 좋은 방법입니다.

- **cURL 예시**
  ```shell
  curl -X GET 'https://api.example.com/members'
  ```
- **Python 예시**

  ```python
  import requests

  API_HOST = 'https://api.example.com'
  response = requests.get(f'{API_HOST}/members')
  print(response.json())
  ```

다양한 프로그래밍 언어별 예시를 제공하면 API를 훨씬 더 빠르고 쉽게 적용해볼 수 있습니다.

---

#### 6\. 에러 코드 (Error Codes)

발생할 수 있는 주요 에러 상황과 그에 해당하는 에러 코드, 그리고 원인에 대해 정리해주면 문제 해결에 큰 도움이 됩니다.

- **`401 Unauthorized`**: 인증 토큰이 없거나 유효하지 않습니다.
- **`429 Too Many Requests`**: 허용된 요청 횟수를 초과했습니다. 잠시 후 다시 시도해 주세요.

---

### 🧐 실제 API 문서 엿보기

대부분의 공개 API는 위에서 살펴본 요소들을 바탕으로 상세한 문서를 제공합니다. 잘 만들어진 다른 API 문서를 참고하는 것은 좋은 학습 자료가 됩니다.

- [GitHub REST API](https://docs.github.com/ko/rest)
- [TMDB API](https://developer.themoviedb.org/reference/intro/getting-started)
- [X API](https://developer.x.com/en/docs/x-api)

---

### 🛠️ API 문서화, 더 쉽고 편하게 하는 법 (자동화 도구)

API 문서를 직접 수동으로 작성할 수도 있지만, 더 편리하게 문서를 만들고 관리할 수 있도록 도와주는 훌륭한 도구들이 많습니다.

#### **전문 도구 소개**

[Swagger](https://swagger.io/)

- **[Swagger](https://swagger.io/) (OpenAPI)**: API 설계를 위한 표준 명세이자, 이를 기반으로 문서를 시각적으로 만들어주는 가장 대표적인 도구입니다. ([API 문서 샘플](https://petstore.swagger.io/))
- **[Redocly](https://redocly.com/)**: OpenAPI 명세를 바탕으로 깔끔하고 가독성 높은 문서를 만들어주는 도구입니다. ([API 문서 샘플](https://redocly.github.io/redoc/))
- **[Postman](https://www.postman.com/)**: API 테스트 도구로 유명하지만, 테스트한 API를 기반으로 문서를 자동으로 생성하고 공유하는 강력한 기능을 제공합니다.

#### **프레임워크와 함께 사용하는 라이브러리**

이러한 도구들은 웹 프레임워크와 통합하여, **백엔드 코드만 작성하면 자동으로 API 문서를 생성**해주기도 합니다.

- **Node.js (Express)**: [swagger-ui-express](https://github.com/scottie1984/swagger-ui-express)
- **Python (Django)**: [drf-yasg](https://github.com/axnsan12/drf-yasg)
- **Java (Spring)**: [springdoc-openapi](https://github.com/springdoc/springdoc-openapi)

---

### ✍️ 마무리하며

- **API 문서**는 API를 사용하는 개발자를 위한 **'사용 설명서'** 이자, 개발자 간의 중요한 **소통 수단**입니다.
- 좋은 문서에는 **엔드포인트, 요청/응답 명세, 인증 방법, 사용 예시** 등이 명확하게 포함되어야 합니다.
- **Swagger**와 같은 자동화 도구를 활용하면, 코드와 문서를 일관성 있게 유지하며 효율적으로 관리할 수 있습니다.

잘 설계된 API라도 사용법을 알기 어렵다면 아무도 쓸 수 없습니다. **친절하고 상세한 문서를 작성하는 것이야말로 좋은 API를 완성하는 마지막 단계**라는 점을 꼭 기억해 주세요.
