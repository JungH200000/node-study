## ğŸ§° Express ë‚´ì¥ ë¯¸ë“¤ì›¨ì–´: ë¯¸ë¦¬ ì¤€ë¹„ëœ ë§ŒëŠ¥ ë„êµ¬ë“¤

Expressë¡œ ì„œë²„ë¥¼ ë§Œë“¤ë‹¤ ë³´ë©´, JSON í˜•ì‹ì˜ ìš”ì²­ ë³¸ë¬¸(body)ì„ í•´ì„í•˜ê±°ë‚˜, HTML í¼(form) ë°ì´í„°ë¥¼ ì²˜ë¦¬í•˜ê±°ë‚˜, ì´ë¯¸ì§€ íŒŒì¼ì„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ë³´ì—¬ì£¼ëŠ” ë“± ì•„ì£¼ í”í•˜ê³  ë°˜ë³µì ì¸ ì‘ì—…ë“¤ì„ ë§ˆì£¼í•˜ê²Œ ë©ë‹ˆë‹¤.

ExpressëŠ” ì´ëŸ° í•„ìˆ˜ ê¸°ëŠ¥ë“¤ì„ ê°œë°œìê°€ ë§¤ë²ˆ ì§ì ‘ êµ¬í˜„í•  í•„ìš”ê°€ ì—†ë„ë¡, ë¯¸ë¦¬ ì˜ ë§Œë“¤ì–´ì§„ ë¯¸ë“¤ì›¨ì–´ë“¤ì„ í•¨ê»˜ ì œê³µí•©ë‹ˆë‹¤. ì´ë¥¼ **ë‚´ì¥ ë¯¸ë“¤ì›¨ì–´(Built-in Middleware)** ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

ì´ ë¯¸ë“¤ì›¨ì–´ë“¤ì€ ëŒ€ë¶€ë¶„ íŠ¹ì • ê²½ë¡œê°€ ì•„ë‹Œ, ì„œë²„ë¡œ ë“¤ì–´ì˜¤ëŠ” **ëª¨ë“  ìš”ì²­**ì— ëŒ€í•´ ê³µí†µì ìœ¼ë¡œ ì ìš©ë˜ëŠ” ê²½ìš°ê°€ ë§ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ë³´í†µ ì•„ë˜ì™€ ê°™ì´ `app.use()`ì— ë°”ë¡œ ì—°ê²°í•˜ì—¬ ì‚¬ìš©í•©ë‹ˆë‹¤.

```javascript
// ì„œë²„ ì „ì²´ì— ì ìš©í•  ë¯¸ë“¤ì›¨ì–´ë¥¼ ì—°ê²°í•˜ëŠ” ì¼ë°˜ì ì¸ í˜•íƒœ
app.use(express.middleware());
```

ê°€ì¥ ëŒ€í‘œì ì¸ ë‚´ì¥ ë¯¸ë“¤ì›¨ì–´ ì„¸ ê°€ì§€ë¥¼ í•˜ë‚˜ì”© ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

---

### 1. `express.json()`

í´ë¼ì´ì–¸íŠ¸ê°€ ì„œë²„ë¡œ `Content-Type: application/json` í˜•íƒœì˜ ë°ì´í„°ë¥¼ ë³´ë‚¼ ë•Œ, ê·¸ ìš”ì²­ ë³¸ë¬¸(body)ì„ í•´ì„í•˜ì—¬ `req.body` ê°ì²´ì— ë„£ì–´ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. API ì„œë²„ë¥¼ ë§Œë“ ë‹¤ë©´ ê±°ì˜ í•„ìˆ˜ì ìœ¼ë¡œ ì‚¬ìš©ë˜ëŠ” ë¯¸ë“¤ì›¨ì–´ì…ë‹ˆë‹¤.

#### ë¯¸ë“¤ì›¨ì–´ê°€ ì—†ë‹¤ë©´?

`express.json()` ë¯¸ë“¤ì›¨ì–´ ì—†ì´ `POST` ìš”ì²­ì„ ë³´ë‚´ë©´, ExpressëŠ” ìš”ì²­ ë³¸ë¬¸ì„ ì–´ë–»ê²Œ í•´ì„í•´ì•¼ í• ì§€ ëª°ë¼ `req.body`ëŠ” `undefined`ê°€ ë©ë‹ˆë‹¤.

```javascript
// src/app.js
import express from 'express';

const app = express();
const PORT = 3000;

app.post('/products', (req, res) => {
  // express.json()ì´ ì—†ìœ¼ë©´ req.bodyëŠ” undefinedê°€ ë©ë‹ˆë‹¤.
  console.log(req.body);
  res.json({ message: 'Product ì¶”ê°€í•˜ê¸°' });
});

app.listen(PORT, () => {
  console.log(`ğŸš€ Server started on port ${PORT}`);
});
```

```http
POST http://localhost:3000/products
Content-Type: application/json

{
  "name": "ìƒí’ˆ 1",
  "price": 10000
}
```

**í„°ë¯¸ë„ ê²°ê³¼:** `undefined`

#### `express.json()` ì ìš© í›„

ì´ì œ ë¼ìš°íŠ¸ë³´ë‹¤ ìœ„ìª½ì— `app.use(express.json());`ì„ ì¶”ê°€í•´ ë´…ì‹œë‹¤.

```javascript
// src/app.js
import express from 'express';

const app = express();
const PORT = 3000;

// ì´ ë¯¸ë“¤ì›¨ì–´ê°€ application/json í˜•ì‹ì˜ ìš”ì²­ ë³¸ë¬¸ì„ req.bodyë¡œ íŒŒì‹±í•´ì¤ë‹ˆë‹¤.
app.use(express.json());

app.post('/products', (req, res) => {
  // ì´ì œ req.bodyì—ì„œ JSON ë°ì´í„°ë¥¼ ì •ìƒì ìœ¼ë¡œ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  console.log(req.body);
  res.json({ message: 'Product ì¶”ê°€í•˜ê¸°' });
});

app.listen(PORT, () => {
  console.log(`ğŸš€ Server started on port ${PORT}`);
});
```

**í„°ë¯¸ë„ ê²°ê³¼:** `{ name: 'ìƒí’ˆ 1', price: 10000 }`

> **ğŸ’¡ ì ê¹\! `express.json()`ì€ í•¨ìˆ˜ ì•„ë‹Œê°€ìš”?**
> ë§ìŠµë‹ˆë‹¤. `express.json()`ì„ í˜¸ì¶œí•˜ë©´, ê·¸ **ì‹¤í–‰ ê²°ê³¼ë¡œ ë¯¸ë“¤ì›¨ì–´ í•¨ìˆ˜ê°€ ë°˜í™˜**ë©ë‹ˆë‹¤. `app.use()`ëŠ” ë°”ë¡œ ê·¸ ë°˜í™˜ëœ í•¨ìˆ˜ë¥¼ ì¸ìë¡œ ë°›ì•„ ì‚¬ìš©í•˜ëŠ” ê²ƒì…ë‹ˆë‹¤.

---

### 2. `express.urlencoded()`

ì£¼ë¡œ HTML `<form>` íƒœê·¸ë¥¼ í†µí•´ ì œì¶œë˜ëŠ” `Content-Type: application/x-www-form-urlencoded` í˜•ì‹ì˜ ë°ì´í„°ë¥¼ í•´ì„í•˜ì—¬ `req.body` ê°ì²´ì— ë„£ì–´ì£¼ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤.

`express.json()`ê³¼ ë§ˆì°¬ê°€ì§€ë¡œ, ì´ ë¯¸ë“¤ì›¨ì–´ê°€ ì—†ìœ¼ë©´ í¼ ë°ì´í„°ëŠ” `req.body`ì— ë‹´ê¸°ì§€ ì•ŠìŠµë‹ˆë‹¤.

```javascript
// src/app.js
import express from 'express';

const app = express();
const PORT = 3000;

// JSONê³¼ URL-encoded í˜•ì‹ì˜ ìš”ì²­ ë³¸ë¬¸ì„ ëª¨ë‘ ì²˜ë¦¬í•˜ë„ë¡ ë‘ ë¯¸ë“¤ì›¨ì–´ë¥¼ ë“±ë¡í•©ë‹ˆë‹¤.
app.use(express.json());
app.use(express.urlencoded({ extended: true }));

app.post('/users', (req, res) => {
  console.log(req.body);
  res.json({ message: 'User ì¶”ê°€í•˜ê¸°' });
});

app.listen(PORT, () => {
  console.log(`ğŸš€ Server started on port ${PORT}`);
});
```

```http
POST http://localhost:3000/users
Content-Type: application/x-www-form-urlencoded

name=jung&age=32
```

**í„°ë¯¸ë„ ê²°ê³¼:** `{ name: 'jung', age: '32' }`

`{ extended: true }` ì˜µì…˜ì€ URL-encoded ë°ì´í„°ì— ê°ì²´ë‚˜ ë°°ì—´ ê°™ì€ ë³µì¡í•œ êµ¬ì¡°ê°€ í¬í•¨ë˜ì–´ ìˆì„ ë•Œë„ ì˜ í•´ì„í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ëŠ” ì„¤ì •ì…ë‹ˆë‹¤. íŠ¹ë³„í•œ ì´ìœ ê°€ ì—†ë‹¤ë©´ `true`ë¡œ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.

---

### 3. `express.static()`

ì„œë²„ì˜ íŠ¹ì • í´ë”ë¥¼ 'ì •ì  íŒŒì¼(static files)'ì„ ìœ„í•œ ê³µê°„ìœ¼ë¡œ ì™¸ë¶€ì— ê³µê°œí•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. ì •ì  íŒŒì¼ì´ë€ ì´ë¯¸ì§€, CSS íŒŒì¼, HTML íŒŒì¼ì²˜ëŸ¼ ì„œë²„ê°€ ë³„ë„ì˜ ì²˜ë¦¬ ì—†ì´ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ ê·¸ëŒ€ë¡œ ì œê³µí•˜ëŠ” íŒŒì¼ì„ ì˜ë¯¸í•©ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´, í”„ë¡œì íŠ¸ì— `public`ì´ë¼ëŠ” í´ë”ë¥¼ ë§Œë“¤ê³  ê·¸ ì•ˆì— ì´ë¯¸ì§€ íŒŒì¼(`two_cat.png`)ê³¼ HTML íŒŒì¼(`index.html`)ì„ ë„£ì—ˆë‹¤ê³  ê°€ì •í•´ ë´…ì‹œë‹¤.

```javascript
// src/app.js
import express from 'express';

const app = express();
const PORT = 3000;

// 'public' í´ë”ë¥¼ ì •ì  íŒŒì¼ ì œê³µ í´ë”ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
app.use(express.static('public'));

app.listen(PORT, () => {
  console.log(`ğŸš€ Server started on port ${PORT}`);
});
```

ì´ì œ ì„œë²„ë¥¼ ì‹¤í–‰í•˜ê³  ë¸Œë¼ìš°ì €ë‚˜ API í…ŒìŠ¤íŠ¸ ë„êµ¬ì—ì„œ ì•„ë˜ ì£¼ì†Œë¡œ ìš”ì²­ì„ ë³´ë‚´ë©´, `public` í´ë” ì•ˆì˜ í•´ë‹¹ íŒŒì¼ë“¤ì´ ê·¸ëŒ€ë¡œ ì‘ë‹µìœ¼ë¡œ ëŒì•„ì˜µë‹ˆë‹¤.

- `http://localhost:3000/two_cat.png` â†’ `public/two_cat.png` íŒŒì¼ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.
- `http://localhost:3000/index.html` â†’ `public/index.html` íŒŒì¼ì„ ë³´ì—¬ì¤ë‹ˆë‹¤.

`express.static()` ë¯¸ë“¤ì›¨ì–´ëŠ” ë§ˆì¹˜ ì›¹ ì„œë²„(Nginx, Apache ë“±)ì˜ ê¸°ëŠ¥ ì¼ë¶€ë¥¼ Expressë¡œ ê°€ì ¸ì˜¨ ê²ƒì²˜ëŸ¼ ë™ì‘í•˜ì—¬, í”„ë¡ íŠ¸ì—”ë“œ íŒŒì¼ì„ í•¨ê»˜ ì„œë¹„ìŠ¤í•  ë•Œ ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤.

> **ì°¸ê³  ë¬¸ì„œ**
> [Express ê³µì‹ ë¬¸ì„œ - express.urlencoded()](https://expressjs.com/en/api.html#express.urlencoded)
