## ğŸ§© ì„œë“œíŒŒí‹° ë¯¸ë“¤ì›¨ì–´: Expressì— ë‚ ê°œ ë‹¬ì•„ì£¼ê¸°

ExpressëŠ” ê·¸ ìì²´ë¡œ ë§¤ìš° ê°€ë³ê³  í•µì‹¬ì ì¸ ê¸°ëŠ¥ë§Œ ì œê³µí•˜ëŠ” 'ë¯¸ë‹ˆë©€ë¦¬ì¦˜' ì² í•™ì„ ê°€ì§„ í”„ë ˆì„ì›Œí¬ì…ë‹ˆë‹¤. ë”°ë¼ì„œ ì‹¤ì œ ì›¹ ì„œë²„ë¥¼ ë§Œë“¤ë‹¤ ë³´ë©´ ë¡œê·¸ ê¸°ë¡, ì¿ í‚¤ íŒŒì‹±, íŒŒì¼ ì—…ë¡œë“œ ë“± ì¶”ê°€ì ì¸ ê¸°ëŠ¥ë“¤ì´ í•„ìš”í•´ì§‘ë‹ˆë‹¤.

ë‹¤í–‰íˆ ìš°ë¦¬ëŠ” ì´ ëª¨ë“  ê²ƒì„ ì§ì ‘ ë§Œë“¤ í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤. ì „ ì„¸ê³„ì˜ ìˆ˜ë§ì€ ê°œë°œìê°€ ë§Œë“¤ì–´ ë†“ì€ ìœ ìš©í•œ ë¯¸ë“¤ì›¨ì–´ë“¤ì´ ì¡´ì¬í•˜ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì´ë¥¼ **ì„œë“œíŒŒí‹° ë¯¸ë“¤ì›¨ì–´(Third-party Middleware)** ë¼ê³  ë¶€ë¥´ë©°, ë§ˆì¹˜ ìŠ¤ë§ˆíŠ¸í°ì— ì•±ì„ ì„¤ì¹˜í•˜ë“¯ `npm`ì„ í†µí•´ ê°„ë‹¨í•˜ê²Œ ì„¤ì¹˜í•˜ê³  ì—°ê²°í•˜ì—¬ Express ì„œë²„ì˜ ê¸°ëŠ¥ì„ ë¬´í•œíˆ í™•ì¥í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ê°€ì¥ ëŒ€í‘œì ì´ê³  ë„ë¦¬ ì“°ì´ëŠ” ì„œë“œíŒŒí‹° ë¯¸ë“¤ì›¨ì–´ë“¤ì„ ì‚´í´ë³´ê² ìŠµë‹ˆë‹¤.

---

### 1. `cookie-parser`

í´ë¼ì´ì–¸íŠ¸ê°€ ë³´ë‚¸ ì¿ í‚¤(Cookie)ë¥¼ ì†ì‰½ê²Œ ë‹¤ë£° ìˆ˜ ìˆëŠ” ê°ì²´(`req.cookies`)ë¡œ ë³€í™˜í•´ì£¼ëŠ” 'ì¿ í‚¤ ë²ˆì—­ê¸°'ì…ë‹ˆë‹¤.

#### `cookie-parser`ê°€ ì—†ë‹¤ë©´?

ì´ ë¯¸ë“¤ì›¨ì–´ ì—†ì´ëŠ”, `req.headers.cookie`ë¥¼ í†µí•´ ì¿ í‚¤ì— ì ‘ê·¼í•´ì•¼ í•˜ë©°, ê·¸ ê²°ê³¼ëŠ” `taste=chocolate; user=guest`ì™€ ê°™ì€ ì•Œì•„ë³´ê¸° í˜ë“  ë¬¸ìì—´ í˜•íƒœì…ë‹ˆë‹¤.

```javascript
// src/app.js
import express from 'express';

const app = express();
const PORT = 3000;

app.get('/cookies', (req, res) => {
  // ì¿ í‚¤ê°€ í•˜ë‚˜ì˜ ê¸´ ë¬¸ìì—´ë¡œ ë“¤ì–´ì˜µë‹ˆë‹¤.
  console.log(req.headers.cookie);
  return res.json({ message: 'Cookie í™•ì¸!' });
});

app.listen(PORT, () => {
  console.log(`ğŸš€ Server started on port ${PORT}`);
});
```

**ìš”ì²­:**

```http
GET http://localhost:3000/cookies
Cookie: `taste=chocolate
```

**í„°ë¯¸ë„ ê²°ê³¼:** `taste=chocolate`

#### `cookie-parser` ì ìš© í›„

ë¨¼ì € `npm`ìœ¼ë¡œ íŒ¨í‚¤ì§€ë¥¼ ì„¤ì¹˜í•©ë‹ˆë‹¤.

```bash
npm install cookie-parser
```

ì´ì œ ë¯¸ë“¤ì›¨ì–´ë¥¼ ì—°ê²°í•˜ë©´, `req.cookies`ë¼ëŠ” í¸ë¦¬í•œ ê°ì²´ë¥¼ í†µí•´ ì¿ í‚¤ ê°’ì— ë°”ë¡œ ì ‘ê·¼í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
// src/app.js
import express from 'express';
import cookieParser from 'cookie-parser'; // 1. import

const app = express();
const PORT = 3000;

app.use(cookieParser()); // 2. ë¯¸ë“¤ì›¨ì–´ ì—°ê²°

app.get('/cookies', (req, res) => {
  // ì´ì œ req.cookies ê°ì²´ë¥¼ í†µí•´ ì¿ í‚¤ë¥¼ ì‰½ê²Œ ë‹¤ë£° ìˆ˜ ìˆìŠµë‹ˆë‹¤.
  console.log(req.cookies);
  return res.json({ cookies: req.cookies });
});

app.listen(PORT, () => {
  console.log(`ğŸš€ Server started on port ${PORT}`);
});
```

**ìš”ì²­:**

```http
GET http://localhost:3000/cookies
Cookie: `taste=chocolate
```

**í„°ë¯¸ë„ ê²°ê³¼:** `{ taste: 'chocolate' }`

- [cookie-parser ê³µì‹ ë¬¸ì„œ (GitHub)](https://github.com/expressjs/cookie-parser)

---

### 2. `morgan`

ì„œë²„ë¡œ ë“¤ì–´ì˜¤ëŠ” ëª¨ë“  ìš”ì²­ì— ëŒ€í•œ ë¡œê·¸(log)ë¥¼ ìë™ìœ¼ë¡œ ê¸°ë¡í•´ì£¼ëŠ” 'ì„œë²„ í™œë™ ê¸°ë¡ê´€'ì…ë‹ˆë‹¤. ì–´ë–¤ ìš”ì²­ì´, ì–¸ì œ, ì–´ë–»ê²Œ ë“¤ì–´ì™€ì„œ ì–´ë–¤ ì‘ë‹µì„ ë°›ì•˜ëŠ”ì§€ ë“±ì„ í„°ë¯¸ë„ì— ì˜ˆì˜ê²Œ ì¶œë ¥í•´ì£¼ì–´ ë””ë²„ê¹…ì— ë§¤ìš° ìœ ìš©í•©ë‹ˆë‹¤.

```bash
npm install morgan
```

`morgan()` í•¨ìˆ˜ì— `'tiny'`, `'dev'` ê°™ì€ í¬ë§· ì˜µì…˜ì„ ì „ë‹¬í•˜ì—¬ ë¡œê·¸ì˜ ìƒì„¸ ìˆ˜ì¤€ì„ ì¡°ì ˆí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
// src/app.js
import express from 'express';
import morgan from 'morgan'; // 1. import

const app = express();
const PORT = 3000;

// 'tiny' í¬ë§·ìœ¼ë¡œ ìš”ì²­ ë¡œê·¸ë¥¼ ê¸°ë¡í•©ë‹ˆë‹¤.
app.use(morgan('tiny')); // 2. ë¯¸ë“¤ì›¨ì–´ ì—°ê²°

app.get('/hello', (req, res) => {
  return res.json({ message: 'ì•ˆë…•í•˜ì„¸ìš”, ë°˜ê°€ì›Œìš”.' });
});

app.listen(PORT, () => {
  console.log(`ğŸš€ Server started on port ${PORT}`);
});
```

**ìš”ì²­:** `GET http://localhost:3000/hello`
**í„°ë¯¸ë„ ê²°ê³¼:** `GET /hello 200 44 - 1.695 ms`
(ë©”ì„œë“œ, ê²½ë¡œ, ìƒíƒœ ì½”ë“œ, ì‘ë‹µ í¬ê¸°, ì‘ë‹µ ì‹œê°„ ìˆœ)

- [morgan ê³µì‹ ë¬¸ì„œ (GitHub)](https://github.com/expressjs/morgan)

---

### 3. `cors`

**CORS(Cross-Origin Resource Sharing)** ëŠ” ì›¹ ë³´ì•ˆ ì •ì±… ì¤‘ í•˜ë‚˜ë¡œ, í•œ ì›¹ì‚¬ì´íŠ¸(`http://a.com`)ê°€ ë‹¤ë¥¸ ì¶œì²˜(`http://b.com`)ì˜ ë¦¬ì†ŒìŠ¤(API ë“±)ì— ì ‘ê·¼í•˜ëŠ” ê²ƒì„ í†µì œí•©ë‹ˆë‹¤. `cors` ë¯¸ë“¤ì›¨ì–´ëŠ” ì´ ë³µì¡í•œ CORS ì •ì±…ì„ ì„œë²„ì—ì„œ ì‰½ê²Œ ì„¤ì •í•  ìˆ˜ ìˆë„ë¡ ë„ì™€ì£¼ëŠ” 'ì¶œì… ì •ì±… ê´€ë¦¬ì'ì…ë‹ˆë‹¤.

```bash
npm install cors
```

ê°€ì¥ ê¸°ë³¸ì ì¸ ì‚¬ìš©ë²•ì€ `app.use(cors())`ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒìœ¼ë¡œ, ëª¨ë“  ì¶œì²˜ì—ì„œì˜ ìš”ì²­ì„ í—ˆìš©í•˜ê²Œ ë©ë‹ˆë‹¤. (ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ë³´ì•ˆì„ ìœ„í•´ íŠ¹ì • ì¶œì²˜ë§Œ í—ˆìš©í•˜ë„ë¡ ì˜µì…˜ì„ ì„¤ì •í•˜ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.)

```javascript
// src/app.js
import express from 'express';
import cors from 'cors'; // 1. import

const app = express();
const PORT = 3000;

app.use(cors()); // 2. ëª¨ë“  ì¶œì²˜ì˜ ìš”ì²­ì„ í—ˆìš©í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´ ì—°ê²°

app.get('/hello', (req, res) => {
  return res.json({ message: 'CORS is enabled!' });
});

app.listen(PORT, () => {
  console.log(`ğŸš€ Server started on port ${PORT}`);
});
```

- [cors ê³µì‹ ë¬¸ì„œ (GitHub)](https://github.com/expressjs/)
- cors ì •ë¦¬ ë¬¸ì„œ : [CORS ì„¤ì •í•˜ê¸°](<../../1. JavaScript ë°±ì—”ë“œ ê°œë°œ ì‹œì‘í•˜ê¸°/12. ë°°í¬í•˜ê¸°/12-2. CORS ì„¤ì •í•˜ê¸°.md>)

---

### 4. `multer`

HTML `<form>`ì„ í†µí•´ íŒŒì¼(ì´ë¯¸ì§€, ë¬¸ì„œ ë“±)ì„ ì—…ë¡œë“œí•  ë•Œ ì‚¬ìš©ë˜ëŠ” `multipart/form-data` í˜•ì‹ì˜ ìš”ì²­ì„ ì²˜ë¦¬í•˜ëŠ” 'íŒŒì¼ ì—…ë¡œë“œ ì „ë¬¸ê°€'ì…ë‹ˆë‹¤.

íŒŒì¼ ì—…ë¡œë“œëŠ” ë‹¤ì†Œ ë³µì¡í•œ ì£¼ì œì´ë¯€ë¡œ, ë‚˜ì¤‘ì— ë” ìì„¸íˆ ë‹¤ë£° ì˜ˆì •ì…ë‹ˆë‹¤. ì§€ê¸ˆì€ "íŒŒì¼ì„ ë‹¤ë£° ë• `multer`ë¼ëŠ” ë¯¸ë“¤ì›¨ì–´ë¥¼ ì“°ëŠ”êµ¬ë‚˜\!" ì •ë„ë¡œë§Œ ê¸°ì–µí•´ ì£¼ì„¸ìš”.

```bash
npm install multer
```

```javascript
// src/app.js
import express from 'express';
import multer from 'multer'; // 1. import

const app = express();
const PORT = 3000;

// 'uploads/' í´ë”ì— íŒŒì¼ì„ ì €ì¥í•˜ë„ë¡ ì„¤ì •
const upload = multer({ dest: 'uploads/' });

// 'avatar'ë¼ëŠ” ì´ë¦„ì˜ í•„ë“œë¡œ ë‹¨ì¼ íŒŒì¼ ì—…ë¡œë“œë¥¼ ì²˜ë¦¬í•˜ëŠ” ë¯¸ë“¤ì›¨ì–´
app.post('/profile', upload.single('avatar'), function (req, res, next) {
  // req.fileì— ì—…ë¡œë“œëœ íŒŒì¼ ì •ë³´ê°€, req.bodyì— í…ìŠ¤íŠ¸ í•„ë“œ ì •ë³´ê°€ ë‹´ê¹ë‹ˆë‹¤.
  res.json({ file: req.file, body: req.body });
});

app.listen(PORT, () => {
  console.log(`ğŸš€ Server started on port ${PORT}`);
});
```

- [multer ê³µì‹ ë¬¸ì„œ (GitHub)](https://github.com/expressjs/multer)
