## 🏗️ 데이터베이스 설계의 첫걸음, Prisma 초기화

개발 환경 준비를 마쳤으니, 이제 우리 e-커머스 프로젝트의 데이터베이스 **설계도**를 만들 차례입니다. **Prisma**를 사용하면 이 설계도를 코드로 아주 깔끔하게 정의하고 관리할 수 있습니다.

데이터베이스의 모든 테이블과 관계를 한 번에 설계하면 복잡하므로, 이번에는 핵심적인 **유저(User)** 와 **상품(Product)** 테이블만 먼저 정의해 보겠습니다.

### 1. Prisma 프로젝트 초기화

가장 먼저, 터미널에 아래 명령어를 입력하여 우리 프로젝트에서 Prisma를 사용하겠다고 선언(초기화)합니다.

```bash
npx prisma init --datasource-provider postgresql
```

> **💡 `npx prisma` ?** > `npx`는 Node.js 패키지를 실행해주는 도구입니다. 앞으로 Prisma와 관련된 명령어는 대부분 `npx prisma`로 시작하니 기억해두세요\!
>
> 위 명령어는 Prisma가 우리 프로젝트에서 **PostgreSQL** 데이터베이스를 사용하도록 초기 설정을 진행하라는 의미입니다. (PostgreSQL은 보통 줄여서 **Postgres**라고 많이 부릅니다.)

명령어를 실행하면, 프로젝트 폴더에 몇 가지 중요한 파일과 폴더가 자동으로 생성됩니다.

---

### 2. 생성된 파일 살펴보기

`prisma init` 명령어가 우리를 위해 무엇을 준비해 주었는지 하나씩 살펴보겠습니다.

#### 📁 `prisma` 폴더와 `schema.prisma` 파일

가장 중요한 파일입니다. 이 `schema.prisma` 파일 안에 앞으로 우리가 만들 데이터베이스의 모든 테이블 구조와 관계를 코드로 정의하게 됩니다. 이 파일이 우리 데이터베이스 설계의 **'원본(Source of Truth)'** 이 되는 셈이죠.

파일을 열어보면 기본 코드가 작성되어 있습니다.

```prisma
// /e-commerce/prisma/schema.prisma
generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}
```

> **⚠️ 중요: `output` 경로와 `PrismaClient` import**

> `generator client` 블록의 `output = "../generated/prisma"` 설정은, Prisma가 데이터베이스 쿼리를 위한 JavaScript 코드를 어디에 생성할지 알려주는 경로입니다.
> `prisma` 폴더의 상위 폴더(프로젝트 루트)에 `generated/prisma` 폴더를 만들고 그 안에 클라이언트 코드를 생성하라는 의미입니다. 따라서 나중에 코드에서 PrismaClient를 불러올 때, 다음과 같이 상대 경로로 `import` 해야 합니다.

```javascript
import { PrismaClient } from './generated/prisma/index.js';
```

지금은 이 코드를 자세히 이해할 필요는 없습니다. 간단히 말해, "Prisma Client(JavaScript 코드)를 생성할 것이고, 데이터베이스는 PostgreSQL을 사용하며, 연결 정보는 `.env` 파일의 `DATABASE_URL` 변수를 참고해\!" 라는 설정입니다.

#### 🔑 `.env` 파일과 데이터베이스 연결

환경 변수를 저장하는 `.env` 파일도 자동으로 생성됩니다. 안에는 `DATABASE_URL`이라는 중요한 변수가 들어있죠.

`DATABASE_URL`은 우리 애플리케이션이 PostgreSQL 데이터베이스 서버에 접속하기 위한 **비밀 주소**입니다. 이 주소를 우리 로컬 환경에 맞게 수정해야 합니다.

**`.env`**

```env
# Before
DATABASE_URL="postgresql://johndoe:randompassword@localhost:5432/mydb?schema=public"

# After (자신의 환경에 맞게 수정)
DATABASE_URL="postgresql://postgres:YOUR_PASSWORD@localhost:5432/hyunmazon_dev?schema=public"
PORT=3000
```

> **⚠️ `DATABASE_URL` 수정하기**
>
> `postgresql://<유저이름>:<비밀번호>@<서버주소>/<DB이름>?...` 형식에 맞춰 아래와 같이 수정해 주세요.
>
> - `<유저이름>`: `postgres` (PostgreSQL 설치 시 생성된 기본 관리자 이름)
> - `<비밀번호>`: PostgreSQL 설치 과정에서 직접 설정했던 **비밀번호**
> - `<DB이름>`: 접속할 데이터베이스 이름입니다. `hyunmazon_dev`처럼 원하는 이름으로 지정하세요. 만약 해당 이름의 데이터베이스가 없다면, 나중에 Prisma가 알아서 생성해주니 걱정하지 마세요.
>
> 추가로, 서버 포트 번호를 위해 `PORT=3000`도 함께 추가해 줍니다.

#### 🙈 `.gitignore` 파일

`.env` 파일에는 데이터베이스 비밀번호 같은 민감한 정보가 들어있기 때문에, 실수로 GitHub에 올라가지 않도록 Git이 무시해야 합니다. `prisma init`은 `.gitignore` 파일에 `.env`를 자동으로 추가해주는 친절한 작업까지 함께 처리해 줍니다.
