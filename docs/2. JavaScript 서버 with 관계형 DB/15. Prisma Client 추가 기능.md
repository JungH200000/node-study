## âœ¨ Prisma Client ê³ ê¸‰ ê¸°ëŠ¥: ì‹¬í™” ì¿¼ë¦¬ ë§ˆìŠ¤í„°í•˜ê¸°

Prisma ClientëŠ” ê¸°ë³¸ì ì¸ CRUD ê¸°ëŠ¥ ì™¸ì—ë„, ë” ë³µìž¡í•˜ê³  íš¨ìœ¨ì ì¸ ë°ì´í„° ì²˜ë¦¬ë¥¼ ìœ„í•œ ë‹¤ì–‘í•œ ì¶”ê°€ ê¸°ëŠ¥ë“¤ì„ ì œê³µí•©ë‹ˆë‹¤. ë” ë˜‘ë˜‘í•˜ê²Œ ë°ì´í„°ë¥¼ ë‹¤ë£° ìˆ˜ ìžˆê²Œ í•´ì£¼ëŠ” Prisma Clientì˜ ì¶”ê°€ ë©”ì†Œë“œì™€ í•„í„° ì¡°ê±´ë“¤ì— ëŒ€í•´ ì•Œì•„ë´…ì‹œë‹¤.

---

### 1. ì•Œì•„ë‘ë©´ ì“¸ëª¨ìžˆëŠ” ì¶”ê°€ CRUD ë©”ì†Œë“œ

#### `findFirst()`

`findUnique()`ëŠ” `@id`ë‚˜ `@unique` í•„ë“œë¡œë§Œ ë°ì´í„°ë¥¼ ì¡°íšŒí•  ìˆ˜ ìžˆì—ˆìŠµë‹ˆë‹¤. ë§Œì•½ **ê³ ìœ í•˜ì§€ ì•Šì€ í•„ë“œ(non-unique)ë¥¼ ì¡°ê±´ìœ¼ë¡œ ì²« ë²ˆì§¸ ë°ì´í„° í•˜ë‚˜ë§Œ** ì°¾ê³  ì‹¶ë‹¤ë©´ `findFirst()`ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

```javascript
// 'firstName'ì´ 'ê¸¸ë™'ì¸ ì²« ë²ˆì§¸ ìœ ì €ë¥¼ ì°¾ëŠ”ë‹¤.
const user = await prisma.user.findFirst({
  where: { firstName: 'ê¸¸ë™' },
  // ì–´ë–¤ 'ì²« ë²ˆì§¸'ë¥¼ ì°¾ì„ì§€ ìˆœì„œë¥¼ ì§€ì •í•  ìˆ˜ë„ ìžˆë‹¤.
  orderBy: { createdAt: 'asc' }, // ê°€ìž¥ ì˜¤ëž˜ëœ ìœ ì €ë¶€í„° ì°¾ê¸°
});
```

#### `upsert()`

`upsert()`ëŠ” **'update or insert'** ì˜ ì¤„ìž„ë§ë¡œ, ì¡°ê±´ì— ë§žëŠ” ë°ì´í„°ê°€ **ìžˆìœ¼ë©´ ìˆ˜ì •í•˜ê³ , ì—†ìœ¼ë©´ ìƒì„±**í•˜ëŠ” ì•„ì£¼ ìœ ìš©í•œ ë©”ì†Œë“œìž…ë‹ˆë‹¤.

`upsert()`ëŠ” `where`, `update`, `create` ì„¸ ê°€ì§€ ì˜µì…˜ì„ ë°›ìŠµë‹ˆë‹¤.

1.  `where`: ë°ì´í„°ë¥¼ ì°¾ì„ ê³ ìœ í•œ ì¡°ê±´ì„ ì§€ì •í•©ë‹ˆë‹¤.
2.  `update`: `where` ì¡°ê±´ì— ë§žëŠ” ë°ì´í„°ê°€ ìžˆì„ ê²½ìš°, ì´ ë‚´ìš©ìœ¼ë¡œ **ìˆ˜ì •**í•©ë‹ˆë‹¤.
3.  `create`: `where` ì¡°ê±´ì— ë§žëŠ” ë°ì´í„°ê°€ ì—†ì„ ê²½ìš°, ì´ ë‚´ìš©ìœ¼ë¡œ ë°ì´í„°ë¥¼ **ìƒì„±**í•©ë‹ˆë‹¤.

```javascript
// yjkim@example.com ì´ë©”ì¼ì„ ê°€ì§„ ìœ ì €ë¥¼ ì°¾ì•„ì„œ,
// ìžˆìœ¼ë©´ ì£¼ì†Œë¥¼ ì—…ë°ì´íŠ¸í•˜ê³ , ì—†ìœ¼ë©´ ìƒˆë¡œìš´ ìœ ì €ë¡œ ìƒì„±í•œë‹¤.
const user = await prisma.user.upsert({
  where: { email: 'yjkim@example.com' },
  update: { address: 'ì„œìš¸íŠ¹ë³„ì‹œ ê°•ë‚¨êµ¬' },
  create: {
    email: 'yjkim@example.com',
    firstName: 'ìœ ì§„',
    lastName: 'ê¹€',
    address: 'ì¶©ì²­ë¶ë„ ì²­ì£¼ì‹œ',
  },
});
```

#### `count()`

ì¡°ê±´ì„ ë§Œì¡±í•˜ëŠ” ë°ì´í„°ì˜ **ê°œìˆ˜**ë§Œ í•„ìš”í•  ë•ŒëŠ” `count()`ë¥¼ ì‚¬ìš©í•˜ëŠ” ê²ƒì´ íš¨ìœ¨ì ìž…ë‹ˆë‹¤. `findMany()`ë¡œ ëª¨ë“  ë°ì´í„°ë¥¼ ê°€ì ¸ì™€ ë°°ì—´ì˜ ê¸¸ì´ë¥¼ ì„¸ëŠ” ê²ƒë³´ë‹¤ í›¨ì”¬ ë¹ ë¦…ë‹ˆë‹¤.

```javascript
// 'FASHION' ì¹´í…Œê³ ë¦¬ì— í•´ë‹¹í•˜ëŠ” ìƒí’ˆì˜ ì´ê°œìˆ˜ë¥¼ ì„¼ë‹¤.
const count = await prisma.product.count({
  where: {
    category: 'FASHION',
  },
});
```

> **ðŸ“š ì°¸ê³  ìžë£Œ**
> ë” ë§Žì€ Prisma Client ë©”ì†Œë“œê°€ ê¶ê¸ˆí•˜ë‹¤ë©´ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
> [Prisma Client API Reference - Model Queries](https://www.prisma.io/docs/orm/reference/prisma-client-reference#model-queries)

---

### 2. ë” ê°•ë ¥í•˜ê²Œ í•„í„°ë§í•˜ê¸°

`where` ì˜µì…˜ ì•ˆì—ì„œ ë‹¤ì–‘í•œ ë¹„êµ ì—°ì‚°ìžì™€ ë…¼ë¦¬ ì—°ì‚°ìžë¥¼ ì¡°í•©í•˜ì—¬ í›¨ì”¬ ë” ì •êµí•œ ë°ì´í„° ì¡°íšŒê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤.

#### ê¸°ë³¸ ë¹„êµ ì—°ì‚°ìž

| ì—°ì‚°ìž           | ì„¤ëª…                                       | ì˜ˆì‹œ                            |
| :--------------- | :----------------------------------------- | :------------------------------ |
| **`not`**        | ê°’ì´ ì¼ì¹˜í•˜ì§€ ì•ŠëŠ” ë°ì´í„°                  | `{ not: 'FASHION' }`            |
| **`in`**         | ë°°ì—´ì— í¬í•¨ëœ ê°’ ì¤‘ í•˜ë‚˜ì™€ ì¼ì¹˜í•˜ëŠ” ë°ì´í„° | `{ in: ['FASHION', 'BEAUTY'] }` |
| **`contains`**   | íŠ¹ì • ë¬¸ìžì—´ì„ í¬í•¨í•˜ëŠ” ë°ì´í„°              | `{ contains: 'TV' }`            |
| **`startsWith`** | íŠ¹ì • ë¬¸ìžì—´ë¡œ ì‹œìž‘í•˜ëŠ” ë°ì´í„°              | `{ startsWith: 'Apple' }`       |

**'FASHION' ì¹´í…Œê³ ë¦¬ê°€ ì•„ë‹Œ(`not`) ìƒí’ˆë“¤ í•„í„°ë§**

```javascript
// catrgoryê°€ 'FASHION'ì´ ì•„ë‹Œ Productë“¤ í•„í„°
const products = await prisma.product.findMany({
  where: {
    category: {
      not: 'FASHION',
    },
  },
});

// categoryê°€ 'FASHION', 'SPORTS', 'BEAUTY' ì¤‘ í•˜ë‚˜ì¸ Productë“¤ í•„í„°
const products = await prisma.product.findMany({
  where: {
    category: {
      in: ['FASHION', 'SPORTS', 'BEAUTY'],
    },
  },
});

// nameì— 'TV'ê°€ ë“¤ì–´ê°€ëŠ” Productë“¤ í•„í„°
const products = await prisma.product.findMany({
  where: {
    category: {
      contains: 'TV',
    },
  },
});

// nameì´ 'Apple'ë¡œ ì‹œìž‘í•˜ëŠ” Productë“¤ í•„í„°
const products = await prisma.product.findMany({
  where: {
    name: {
      startWith: 'Apple',
    },
  },
});
```

#### ë…¼ë¦¬ ì—°ì‚°ìž (`AND`, `OR`, `NOT`)

##### AND (ëª¨ë“  ì¡°ê±´ ë§Œì¡±)

ì—¬ëŸ¬ ì¡°ê±´ì„ **ëª¨ë‘ ë§Œì¡±**í•˜ëŠ” ë°ì´í„°ë¥¼ ì°¾ìœ¼ë ¤ë©´, `where` ê°ì²´ ì•ˆì— ì—¬ëŸ¬ í•„í„°ë¥¼ ë‚˜ì—´í•˜ë©´ ë©ë‹ˆë‹¤. (ê¸°ë³¸ ë™ìž‘)

**'FASHION' ì¹´í…Œê³ ë¦¬ì´ë©´ì„œ `name`ì— 'ë‚˜ì´í‚¤'ê°€ ë“¤ì–´ê°€ëŠ” ìƒí’ˆë“¤ í•„í„°ë§**

```javascript
const products = await prisma.product.findMany({
  where: {
    category: 'FASHION',
    name: {
      contains: 'ë‚˜ì´í‚¤',
    },
  },
});
```

##### OR (í•˜ë‚˜ë¼ë„ ë§Œì¡±)

ì—¬ëŸ¬ ì¡°ê±´ ì¤‘ **í•˜ë‚˜ë¼ë„ ë§Œì¡±**í•˜ëŠ” ë°ì´í„°ë¥¼ ì°¾ìœ¼ë ¤ë©´ `OR` ì—°ì‚°ìžë¥¼ ì‚¬ìš©í•˜ê³ , ì¡°ê±´ë“¤ì„ ë°°ì—´ë¡œ ë¬¶ì–´ì¤ë‹ˆë‹¤.

**`name`ì— 'ì•„ë””ë‹¤ìŠ¤'ê°€ ë“¤ì–´ê°€ê±°ë‚˜ 'ë‚˜ì´í‚¤'ê°€ ë“¤ì–´ê°€ëŠ” ìƒí’ˆë“¤ í•„í„°ë§**

```javascript
const products = await prisma.product.findMany({
  where: {
    OR: [
      {
        name: {
          contains: 'ì•„ë””ë‹¤ìŠ¤',
        },
      },
      {
        name: {
          contains: 'ë‚˜ì´í¬',
        },
      },
    ],
  },
});
```

##### NOT (ì¡°ê±´ ë¶ˆë§Œì¡±)

**íŠ¹ì • ì¡°ê±´ì„ ì œì™¸**í•œ ë°ì´í„°ë¥¼ ì°¾ìœ¼ë ¤ë©´ `NOT` ì—°ì‚°ìžë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

**`name`ì— 'ì‚¼ì„±'ì´ ë“¤ì–´ê°€ì§€ë§Œ, 'TV'ëŠ” ë“¤ì–´ê°€ì§€ ì•ŠëŠ” ìƒí’ˆë“¤ í•„í„°ë§**

```javascript
const product = await prisma.product.findMany({
  where: {
    name: {
      contains: 'ì‚¼ì„±',
    },
    NOT: {
      name: {
        contains: 'TV',
      },
    },
  },
});
```

> **ðŸ“š ì°¸ê³  ìžë£Œ**
> ë” ë§Žì€ í•„í„° ì¡°ê±´ê³¼ ì—°ì‚°ìžê°€ ê¶ê¸ˆí•˜ë‹¤ë©´ ê³µì‹ ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì„¸ìš”.
> [Prisma Client API Reference - Filter conditions and operators](https://www.prisma.io/docs/orm/reference/prisma-client-reference#filter-conditions-and-operators)
