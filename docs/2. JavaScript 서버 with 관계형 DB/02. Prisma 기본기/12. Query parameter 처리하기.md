ì œê³µí•´ì£¼ì‹  ë‚´ìš©ì— ì¼ë¶€ ìˆ˜ì •ì´ ìˆì—ˆìŠµë‹ˆë‹¤.

API í…ŒìŠ¤íŠ¸ ì˜ˆì‹œ ì¤‘, ì„¤ëª…ì„ ë” ëª…í™•í•˜ê²Œ ë‹¤ë“¬ê³  ë§ˆì§€ë§‰ ìš”ì²­ì˜ ì˜¤íƒ€ë¥¼ ìˆ˜ì •í–ˆìŠµë‹ˆë‹¤. ì „ì²´ì ì¸ ê°œë… ì„¤ëª…ê³¼ ì½”ë“œ, ë¡œì§ì€ ë§¤ìš° í›Œë¥­í•˜ì—¬, ìˆ˜ì •í•œ ë¶€ë¶„ì„ ì¤‘ì‹¬ìœ¼ë¡œ ì…ë¬¸ìë¶„ë“¤ì´ ë” ì‰½ê²Œ ë”°ë¼ í•  ìˆ˜ ìˆë„ë¡ ì „ì²´ ê°€ì´ë“œë¥¼ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.

---

## âš™ï¸ APIì— ë‚ ê°œ ë‹¬ê¸°: ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì²˜ë¦¬í•˜ê¸°

ì§€ê¸ˆê¹Œì§€ ë§Œë“  `GET /users` ì—”ë“œí¬ì¸íŠ¸ëŠ” í•­ìƒ ëª¨ë“  ìœ ì €ë¥¼ ë˜‘ê°™ì€ ìˆœì„œë¡œ ë°˜í™˜í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” 'ìµœì‹ ìˆœ/ì˜¤ë˜ëœìˆœ ì •ë ¬'ì´ë‚˜ '1í˜ì´ì§€/2í˜ì´ì§€ ë³´ê¸°'ì²˜ëŸ¼, ì‚¬ìš©ìê°€ ì›í•˜ëŠ” ì¡°ê±´ì— ë§ì¶° ë°ì´í„°ë¥¼ ë‹¤ë¥´ê²Œ ë³´ì—¬ì¤˜ì•¼ í•  ë•Œê°€ ë§ìŠµë‹ˆë‹¤.

URLì˜ `?` ë’¤ì— ì˜¤ëŠ” **ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°(Query Parameter)** ë¥¼ ì²˜ë¦¬í•˜ë©´, ì´ì²˜ëŸ¼ ìœ ì—°í•˜ê³  ê°•ë ¥í•œ APIë¥¼ ë§Œë“¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤. `prisma.user.findMany()` ë©”ì†Œë“œì˜ ë‹¤ì–‘í•œ ì˜µì…˜ì„ í™œìš©í•˜ì—¬ **ì •ë ¬(order)** ê³¼ **í˜ì´ì§€ë„¤ì´ì…˜(pagination)** ê¸°ëŠ¥ì„ êµ¬í˜„í•´ ë³´ê² ìŠµë‹ˆë‹¤.

### 1. ë¼ìš°íŠ¸ í•¸ë“¤ëŸ¬ ì„¤ê³„í•˜ê¸°

`GET /users` ì—”ë“œí¬ì¸íŠ¸ê°€ ë‹¤ìŒê³¼ ê°™ì€ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆë„ë¡ ì½”ë“œë¥¼ ìˆ˜ì •í•´ ë³´ê² ìŠµë‹ˆë‹¤.

- **`order`**: ì •ë ¬ ìˆœì„œ. `'oldest'`ì¼ ê²½ìš° ì˜¤ë˜ëœìˆœ, ê·¸ ì™¸ì—ëŠ” ìµœì‹ ìˆœ(ê¸°ë³¸ê°’).
- **`offset`**: ê±´ë„ˆë›¸ ë°ì´í„° ê°œìˆ˜. (ê¸°ë³¸ê°’: `0`)
- **`limit`**: ê°€ì ¸ì˜¬ ë°ì´í„° ê°œìˆ˜. (ê¸°ë³¸ê°’: `10`)

---

### 2. ì¿¼ë¦¬ íŒŒë¼ë¯¸í„° ì½ê¸° (ê¸°ë³¸ê°’ ì„¤ì •)

ë¨¼ì €, `req.query`ì—ì„œ ê° íŒŒë¼ë¯¸í„°ë¥¼ ì¶”ì¶œí•©ë‹ˆë‹¤. **êµ¬ì¡° ë¶„í•´ í• ë‹¹** ë¬¸ë²•ê³¼ **ê¸°ë³¸ê°’** ì„¤ì •ì„ í•¨ê»˜ ì‚¬ìš©í•˜ë©´, ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ê°€ ë“¤ì–´ì˜¤ì§€ ì•Šì•˜ì„ ë•Œì˜ ê¸°ë³¸ ë™ì‘ì„ ì•„ì£¼ ê¹”ë”í•˜ê²Œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```javascript
// /app.js
app.get('/users', async (req, res) => {
  // ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ê°€ ì—†ìœ¼ë©´ offset=0, limit=10, order='newest'ê°€ ê¸°ë³¸ìœ¼ë¡œ ì‚¬ìš©ë©ë‹ˆë‹¤.
  const { offset = 0, limit = 10, order = 'newest' } = req.query;

  // ...
});
```

---

### 3. Prisma ì¿¼ë¦¬ ì˜µì…˜ êµ¬í˜„í•˜ê¸°

ì´ì œ ì¶”ì¶œí•œ íŒŒë¼ë¯¸í„°ë¥¼ Prismaê°€ ì´í•´í•  ìˆ˜ ìˆëŠ” `findMany` ì˜µì…˜ìœ¼ë¡œ ë³€í™˜í•©ë‹ˆë‹¤.

#### í˜ì´ì§€ë„¤ì´ì…˜ (Pagination)

`offset`ê³¼ `limit`ì€ 'ê²°ê³¼ë¥¼ í˜ì´ì§€ì²˜ëŸ¼ ë‚˜ëˆ„ì–´ ë³´ì—¬ì£¼ëŠ”' í˜ì´ì§€ë„¤ì´ì…˜ ê¸°ëŠ¥ì„ êµ¬í˜„í•˜ëŠ” ë° ì‚¬ìš©ë©ë‹ˆë‹¤.

- `offset` (ê±´ë„ˆë›¸ ê°œìˆ˜) â†’ Prismaì˜ **`skip`** ì˜µì…˜
- `limit` (ê°€ì ¸ì˜¬ ê°œìˆ˜) â†’ Prismaì˜ **`take`** ì˜µì…˜

ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ëŠ” í•­ìƒ ë¬¸ìì—´(string)ë¡œ ë“¤ì–´ì˜¤ê¸° ë•Œë¬¸ì—, ìˆ«ì(number)ë¥¼ í•„ìš”ë¡œ í•˜ëŠ” `skip`ê³¼ `take` ì˜µì…˜ì— ì „ë‹¬í•˜ê¸° ì „ì— `parseInt()`ë¡œ ë³€í™˜í•´ì£¼ëŠ” ê²ƒì´ ì•ˆì „í•©ë‹ˆë‹¤.

#### ë™ì  ì •ë ¬ (Dynamic Sorting)

`order` ê°’ì— ë”°ë¼ ë‹¤ë¥¸ ì •ë ¬ ê·œì¹™ì„ ì ìš©í•´ì•¼ í•©ë‹ˆë‹¤. `switch` ë¬¸ì„ ì‚¬ìš©í•˜ë©´ ë‹¤ì–‘í•œ ì •ë ¬ ì˜µì…˜ì„ ê¹”ë”í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

- `order` ê°’ â†’ Prismaì˜ **`orderBy`** ì˜µì…˜

---

### âœ… ìµœì¢… ì½”ë“œ

ìœ„ ê°œë…ë“¤ì„ ëª¨ë‘ ì ìš©í•œ ìµœì¢… ì½”ë“œëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

```javascript
// /app.js
app.get('/users', async (req, res) => {
  const { offset = 0, limit = 10, order = 'newest' } = req.query;

  let orderBy;
  // order ê°’ì— ë”°ë¼ orderBy ê°ì²´ë¥¼ ë™ì ìœ¼ë¡œ ì„¤ì •í•©ë‹ˆë‹¤.
  switch (order) {
    case 'oldest':
      orderBy = { createdAt: 'asc' }; // ì˜¤ë˜ëœìˆœ (ì˜¤ë¦„ì°¨ìˆœ)
      break;
    case 'newest':
    default:
      orderBy = { createdAt: 'desc' }; // ìµœì‹ ìˆœ (ë‚´ë¦¼ì°¨ìˆœ)
      break;
  }

  const users = await prisma.user.findMany({
    skip: parseInt(offset),
    take: parseInt(limit),
    orderBy: orderBy,
    // `orderBy: orderBy` ë¼ê³  ì‘ì„±í•´ë„ ë¨
  });

  res.send(users);
});
```

---

### ğŸ§ª API í…ŒìŠ¤íŠ¸í•˜ê¸°

ì´ì œ ë‹¤ì–‘í•œ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ ì¡°í•©í•˜ì—¬ APIë¥¼ í…ŒìŠ¤íŠ¸í•´ ë´…ì‹œë‹¤.

#### 1\. ê¸°ë³¸ ìš”ì²­ (ìµœì‹ ìˆœ 10ê°œ)

```http
GET http://localhost:3000/users
```

â†’ `createdAt` ê¸°ì¤€ìœ¼ë¡œ ë‚´ë¦¼ì°¨ìˆœ(ìµœì‹ ìˆœ) ì •ë ¬ëœ ìœ ì € ë°ì´í„°ê°€ ìµœëŒ€ 10ê°œ ë°˜í™˜ë©ë‹ˆë‹¤.

#### 2\. ì˜¤ë˜ëœìˆœ ì •ë ¬

```http
GET http://localhost:3000/users?order=oldest
```

â†’ `createdAt` ê¸°ì¤€ìœ¼ë¡œ ì˜¤ë¦„ì°¨ìˆœ(ì˜¤ë˜ëœìˆœ) ì •ë ¬ëœ ê²°ê³¼ê°€ ë°˜í™˜ë©ë‹ˆë‹¤.

#### 3\. í˜ì´ì§€ë„¤ì´ì…˜

```http
GET http://localhost:3000/users?offset=2&limit=2
```

â†’ ì „ì²´ ìœ ì € ì¤‘ ì²˜ìŒ 2ëª…ì„ ê±´ë„ˆë›°ê³ (`offset=2`), ê·¸ë‹¤ìŒ 2ëª…ë§Œ(`limit=2`) ê°€ì ¸ì˜µë‹ˆë‹¤. (ì¦‰, 3ë²ˆì§¸ì™€ 4ë²ˆì§¸ ìœ ì €)

#### 4\. ëª¨ë“  ì¡°ê±´ ì¡°í•©í•˜ê¸°

```http
GET http://localhost:3000/users?order=oldest&offset=1&limit=2
```

â†’ **ì˜¤ë˜ëœìˆœ**ìœ¼ë¡œ ì •ë ¬í•œ ë’¤, **ì²« ë²ˆì§¸ ìœ ì €ë¥¼ ê±´ë„ˆë›°ê³ **, ê·¸ë‹¤ìŒ **2ëª…ì˜ ìœ ì €**ë¥¼ ê°€ì ¸ì˜µë‹ˆë‹¤.

ì´ì²˜ëŸ¼ ì¿¼ë¦¬ íŒŒë¼ë¯¸í„°ë¥¼ í™œìš©í•˜ë©´ í•˜ë‚˜ì˜ ì—”ë“œí¬ì¸íŠ¸ë¡œë„ í´ë¼ì´ì–¸íŠ¸ì—ê²Œ í›¨ì”¬ ë” í’ë¶€í•˜ê³  ìœ ì—°í•œ ë°ì´í„° ì¡°íšŒ ê¸°ëŠ¥ì„ ì œê³µí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
