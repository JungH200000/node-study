## 🗑️ (실습) `OrderItem` onDelete 규칙 설정하기

이전 가이드에서 `onDelete` 옵션의 개념과 `User` 관련 모델에 적용하는 방법을 배웠습니다. 이제 배운 지식을 활용하여, 주문 시스템의 핵심인 `OrderItem` 모델에 적절한 `onDelete` 규칙을 직접 설정하는 실습을 진행하겠습니다.

### 실습 목표

`Order` 또는 `Product` 데이터가 삭제될 때, `OrderItem` 데이터가 어떻게 반응해야 하는지에 대한 규칙을 `schema.prisma` 파일에 정의하고 마이그레이션을 실행합니다.

### 요구사항

1.  **`Order`가 삭제될 경우**: 해당 주문에 속해있던 모든 `OrderItem` 데이터도 **함께 삭제**되어야 합니다.
2.  **`Product`가 삭제될 경우**: 과거 주문 기록 보존을 위해 `OrderItem` 데이터는 삭제되지 않고, 어떤 상품이었는지의 **연결만 끊어져야 합니다 (`productId`를 `NULL`로 설정).**
3.  **마이그레이션 이름**: `add_on_delete_to_order_items`

---

### 🏗️ 마이그레이션 실행하기

스키마에 새로운 데이터베이스 규칙을 추가했으니, 마이그레이션을 통해 실제 데이터베이스에 변경사항을 적용합니다.

```bash
npx prisma migrate dev --name add_on_delete_to_order_items
```

> **Your database is now in sync with your schema.**

성공 메시지가 나타나면 모든 규칙이 데이터베이스에 성공적으로 적용된 것입니다.

---

### 결과 확인하기

`npx prisma studio`를 실행하여 스키마를 확인해 보세요. `OrderItem`의 `productId` 필드가 이제 선택 사항(Nullable)으로 변경된 것을 볼 수 있습니다.

이제 데이터베이스는 주문이나 상품이 삭제될 때 어떻게 행동해야 하는지에 대한 명확한 규칙까지 갖추게 되어, 데이터의 일관성과 안정성이 한층 더 높아졌습니다\! 🎉
