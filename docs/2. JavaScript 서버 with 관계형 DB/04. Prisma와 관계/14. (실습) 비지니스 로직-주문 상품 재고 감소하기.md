## ⚙️ (실습) 비즈니스 로직: 주문 시 재고 감소시키기

주문 시스템의 핵심 비즈니스 로직 중 하나는, **주문이 성공적으로 생성되었을 때 관련된 상품들의 재고를 정확히 감소시키는 것**입니다.

이번 실습에서는 `POST /orders` API에 이 재고 감소 로직을 직접 구현해 보겠습니다.

### 실습 목표

`POST /orders` 요청이 성공하면, 요청에 포함된 `orderItems` 배열의 각 상품(`productId`)에 대해 주문 수량(`quantity`)만큼 재고(`stock`)를 감소시키는 코드를 작성합니다.

---

### Prisma `decrement` 활용하기

Prisma는 숫자 필드의 값을 감소시키는 편리한 기능을 제공합니다. `.update()` 메소드의 `data` 객체 안에서 `decrement` 속성을 사용하면, 데이터베이스에서 직접 안전하게 값을 줄일 수 있습니다.

```javascript
// 특정 Product의 stock을 5만큼 감소시키는 예시
await prisma.product.update({
  where: { id: 'some-product-id' },
  data: {
    stock: {
      decrement: 5,
    },
  },
});
```

---

### 테스트 시나리오

1.  먼저 `GET /products/:id` 요청으로 주문할 상품들의 **현재 재고**를 확인합니다.
2.  아래 `POST /orders` 요청을 보내 새로운 주문을 생성합니다.
3.  다시 `GET /products/:id` 요청을 보내, 주문한 수량만큼 **재고가 정확히 감소했는지** 확인합니다.

**[주문 생성 요청 예시]**

```http
POST http://localhost:3000/orders
Content-Type: application/json

{
  "userId": "70e1e61d-f2ae-4d7d-bf8f-d65eafdb6a45",
  "orderItems": [
    {
      "productId": "1e112c02-7c92-4d52-b76e-485e41e3f64d",
      "unitPrice": 59000,
      "quantity": 1
    },
    {
      "productId": "f751e63f-686d-42d4-898e-3ef6d4137908",
      "unitPrice": 79000,
      "quantity": 2
    }
  ]
}
```

위 요청이 성공하면, `1e11...` 상품의 재고는 `1`만큼, `f751...` 상품의 재고는 `2`만큼 감소해야 합니다.
